24-10-16.00:00:27.949 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:00:27.949 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m56s350ms669µs500ns).
24-10-16.00:00:27.949 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m56s260ms264µs400ns).
24-10-16.00:00:27.957 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=2m19s465ms960µs).
24-10-16.00:00:27.992 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:00:28.003 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:00:28.009 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:00:28.109 [http-nio-8091-exec-2] ERROR RaffleActivityController - 活动抽奖失败 userId:origami activityId:100301
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'activity_id' cannot be null
### The error may exist in file [E:\Code\Java\big-market\big-market-app\target\classes\mybatis\mapper\user_award_record_mapper.xml]
### The error may involve com.origamii.infrastructure.persistent.dao.IUserAwardRecordDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_award_record_000(user_id, activity_id, strategy_id, order_id, award_id, award_title, award_time,                                       award_state, create_time, update_time)         values (?, ?, ?, ?, ?, ?, ?,                 ?, now(), now())
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'activity_id' cannot be null
; Column 'activity_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'activity_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at jdk.proxy2/jdk.proxy2.$Proxy110.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at jdk.proxy2/jdk.proxy2.$Proxy136.insert(Unknown Source)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.lambda$saveUserAwardRecord$0(AwardRepository.java:88)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.saveUserAwardRecord(AwardRepository.java:85)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$FastClassBySpringCGLIB$$ef9e8803.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$EnhancerBySpringCGLIB$$94fefb47.saveUserAwardRecord(<generated>)
	at com.origamii.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:56)
	at com.origamii.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:138)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1589)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'activity_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at jdk.proxy2/jdk.proxy2.$Proxy183.update(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 73 common frames omitted
24-10-16.00:00:28.971 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:00:28.971 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:00:29.015 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:00:29.015 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:00:31.934 [main            ] INFO  Application            - Starting Application using Java 19.0.1 on Legion-R9000P with PID 21996 (E:\Code\Java\big-market\big-market-app\target\classes started by lenovo in E:\Code\Java\big-market)
24-10-16.00:00:31.935 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-10-16.00:00:32.806 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-10-16.00:00:32.810 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-10-16.00:00:32.852 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 0 Redis repository interfaces.
24-10-16.00:00:33.752 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-10-16.00:00:33.760 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-10-16.00:00:33.761 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-10-16.00:00:33.761 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-10-16.00:00:33.867 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-10-16.00:00:33.868 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1892 ms
24-10-16.00:00:34.230 [main            ] INFO  Version                - Redisson 3.23.4
24-10-16.00:00:34.706 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:00:34.724 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:00:36.173 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-10-16.00:00:36.271 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-10-16.00:00:36.285 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-10-16.00:00:36.287 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.236.132:5672]
24-10-16.00:00:36.349 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#2c4be45f:0/SimpleConnection@13fad0c7 [delegate=amqp://origami@192.168.236.132:5672/, localPort= 12430]
24-10-16.00:00:36.420 [main            ] INFO  Application            - Started Application in 4.932 seconds (JVM running for 5.93)
24-10-16.00:00:36.871 [RMI TCP Connection(1)-192.168.236.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-10-16.00:00:36.871 [RMI TCP Connection(1)-192.168.236.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-10-16.00:00:36.873 [RMI TCP Connection(1)-192.168.236.1] INFO  DispatcherServlet      - Completed initialization in 2 ms
24-10-16.00:00:36.876 [RMI TCP Connection(2)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:00:37.135 [RMI TCP Connection(2)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:00:37.156 [RMI TCP Connection(2)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:00:37.178 [RMI TCP Connection(2)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:00:40.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:00:40.014 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:00:40.066 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】 strategyId:100006 awardId:105
24-10-16.00:00:40.067 [scheduling-1    ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:00:40.089 [scheduling-1    ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:00:45.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:00:45.004 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:00:50.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:00:50.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:00:51.169 [http-nio-8091-exec-3] INFO  RaffleActivityController - 活动抽奖 user:origami activityId:100301
24-10-16.00:00:59.481 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:00:59.486 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:01:09.713 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:01:09.717 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:01:10.010 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:01:10.012 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:01:10.241 [http-nio-8091-exec-3] INFO  AbstractRaffleActivityPartake - 创建参与活动订单【已存在 未消费】 userId:origami, activityId:100301, userRaffleOrderEntity:{"activityId":100301,"activityName":"测试活动","orderId":"951635479379","orderState":"create","orderTime":1729007702000,"strategyId":100006,"userId":"origami"}
24-10-16.00:01:15.170 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:01:15.651 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:01:22.198 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:01:22.960 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:01:22.960 [http-nio-8091-exec-3] INFO  RaffleActivityController - 活动抽奖 创建订单 userId:origami activityId:100301 orderId:951635479379
24-10-16.00:01:47.843 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:01:54.569 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:01:54.571 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:01:54.606 [http-nio-8091-exec-3] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: origami strategyId: 100006 ruleModel: rule_default awardId: 104
24-10-16.00:01:54.609 [http-nio-8091-exec-3] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 origami 100006 104 rule_default
24-10-16.00:01:54.645 [http-nio-8091-exec-3] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:origami,strategyId:100006,awardId:104
24-10-16.00:01:54.657 [http-nio-8091-exec-3] INFO  RuleStockLogicTreeNode - 规则过滤-扣减库存-成功 userId:origami,strategyId:100006,awardId:104
24-10-16.00:01:54.742 [http-nio-8091-exec-3] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】，treeId：tree_luck_award，node：rule_stock，code：0001
24-10-16.00:01:54.745 [http-nio-8091-exec-3] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 origami 100006 104 
24-10-16.00:02:05.381 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:02:16.391 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:02:57.334 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:02:58.159 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】 strategyId:100006 awardId:104
24-10-16.00:03:08.838 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:03:10.957 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:03:10.960 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:04:50.589 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m53s256ms245µs500ns).
24-10-16.00:04:50.589 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m53s256ms246µs100ns).
24-10-16.00:04:50.592 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m53s256ms229µs400ns).
24-10-16.00:04:50.604 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:04:54.738 [http-nio-8091-exec-3] ERROR RaffleActivityController - 活动抽奖失败 userId:origami activityId:100301
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'activity_id' cannot be null
### The error may exist in file [E:\Code\Java\big-market\big-market-app\target\classes\mybatis\mapper\user_award_record_mapper.xml]
### The error may involve com.origamii.infrastructure.persistent.dao.IUserAwardRecordDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_award_record_000(user_id, activity_id, strategy_id, order_id, award_id, award_title, award_time,                                       award_state, create_time, update_time)         values (?, ?, ?, ?, ?, ?, ?,                 ?, now(), now())
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'activity_id' cannot be null
; Column 'activity_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'activity_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at jdk.proxy2/jdk.proxy2.$Proxy110.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at jdk.proxy2/jdk.proxy2.$Proxy136.insert(Unknown Source)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.lambda$saveUserAwardRecord$0(AwardRepository.java:88)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.saveUserAwardRecord(AwardRepository.java:85)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$FastClassBySpringCGLIB$$ef9e8803.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$EnhancerBySpringCGLIB$$94fefb47.saveUserAwardRecord(<generated>)
	at com.origamii.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:56)
	at com.origamii.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:138)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1589)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'activity_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at jdk.proxy2/jdk.proxy2.$Proxy183.update(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 73 common frames omitted
24-10-16.00:04:55.013 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:04:55.014 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:05:00.008 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:05:00.010 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:05:05.007 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:05:05.008 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:05:08.569 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动抽奖 user:origami activityId:100301
24-10-16.00:05:11.267 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:05:11.269 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:05:11.296 [http-nio-8091-exec-2] INFO  AbstractRaffleActivityPartake - 创建参与活动订单【已存在 未消费】 userId:origami, activityId:100301, userRaffleOrderEntity:{"activityId":100301,"activityName":"测试活动","orderId":"951635479379","orderState":"create","orderTime":1729007702000,"strategyId":100006,"userId":"origami"}
24-10-16.00:05:11.296 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动抽奖 创建订单 userId:origami activityId:100301 orderId:951635479379
24-10-16.00:05:11.305 [http-nio-8091-exec-2] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: origami strategyId: 100006 ruleModel: rule_default awardId: 106
24-10-16.00:05:11.306 [http-nio-8091-exec-2] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 origami 100006 106 rule_default
24-10-16.00:05:11.336 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:05:11.337 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:05:11.353 [http-nio-8091-exec-2] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:origami,strategyId:100006,awardId:106
24-10-16.00:05:11.361 [http-nio-8091-exec-2] INFO  DecisionTreeEngine     - 决策树引擎【规则树】，treeId：tree_lock_1，node：rule_lock，code：0001
24-10-16.00:05:11.361 [http-nio-8091-exec-2] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:origami,strategyId:100006,awardId:106,ruleValue:101:1,100
24-10-16.00:05:11.361 [http-nio-8091-exec-2] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:origami,strategyId:100006,awardId:106,luckAwardId:101,awardRuleValue:1,100
24-10-16.00:05:11.361 [http-nio-8091-exec-2] INFO  DecisionTreeEngine     - 决策树引擎【规则树】，treeId：tree_lock_1，node：rule_luck_award，code：0001
24-10-16.00:05:11.361 [http-nio-8091-exec-2] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 origami 100006 101 1,100
24-10-16.00:05:11.377 [http-nio-8091-exec-2] ERROR RaffleActivityController - 活动抽奖失败 userId:origami activityId:100301
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'activity_id' cannot be null
### The error may exist in file [E:\Code\Java\big-market\big-market-app\target\classes\mybatis\mapper\user_award_record_mapper.xml]
### The error may involve com.origamii.infrastructure.persistent.dao.IUserAwardRecordDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_award_record_000(user_id, activity_id, strategy_id, order_id, award_id, award_title, award_time,                                       award_state, create_time, update_time)         values (?, ?, ?, ?, ?, ?, ?,                 ?, now(), now())
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'activity_id' cannot be null
; Column 'activity_id' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'activity_id' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at jdk.proxy2/jdk.proxy2.$Proxy110.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at jdk.proxy2/jdk.proxy2.$Proxy136.insert(Unknown Source)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.lambda$saveUserAwardRecord$0(AwardRepository.java:88)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.saveUserAwardRecord(AwardRepository.java:85)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$FastClassBySpringCGLIB$$ef9e8803.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$EnhancerBySpringCGLIB$$94fefb47.saveUserAwardRecord(<generated>)
	at com.origamii.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:56)
	at com.origamii.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:138)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1589)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'activity_id' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at jdk.proxy2/jdk.proxy2.$Proxy183.update(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 73 common frames omitted
24-10-16.00:05:12.278 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:05:12.278 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:05:12.320 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:05:12.321 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:05:18.695 [main            ] INFO  Application            - Starting Application using Java 19.0.1 on Legion-R9000P with PID 30964 (E:\Code\Java\big-market\big-market-app\target\classes started by lenovo in E:\Code\Java\big-market)
24-10-16.00:05:18.697 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-10-16.00:05:19.512 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-10-16.00:05:19.514 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-10-16.00:05:19.552 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 0 Redis repository interfaces.
24-10-16.00:05:20.396 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-10-16.00:05:20.403 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-10-16.00:05:20.404 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-10-16.00:05:20.404 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-10-16.00:05:20.501 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-10-16.00:05:20.501 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1762 ms
24-10-16.00:05:20.801 [main            ] INFO  Version                - Redisson 3.23.4
24-10-16.00:05:21.252 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:05:21.270 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:05:22.599 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-10-16.00:05:22.679 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-10-16.00:05:22.691 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-10-16.00:05:22.693 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.236.132:5672]
24-10-16.00:05:22.743 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#49ea13b6:0/SimpleConnection@75b25ec3 [delegate=amqp://origami@192.168.236.132:5672/, localPort= 12680]
24-10-16.00:05:22.800 [main            ] INFO  Application            - Started Application in 4.546 seconds (JVM running for 5.202)
24-10-16.00:05:22.867 [RMI TCP Connection(1)-192.168.236.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-10-16.00:05:22.867 [RMI TCP Connection(1)-192.168.236.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-10-16.00:05:22.869 [RMI TCP Connection(1)-192.168.236.1] INFO  DispatcherServlet      - Completed initialization in 2 ms
24-10-16.00:05:22.869 [RMI TCP Connection(2)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:05:23.099 [RMI TCP Connection(2)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:05:23.116 [RMI TCP Connection(2)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:05:23.137 [RMI TCP Connection(2)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:05:25.013 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:05:25.026 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:05:30.010 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:05:30.012 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:05:35.012 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:05:35.014 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:05:40.009 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:05:40.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:05:43.502 [main            ] INFO  Application            - Starting Application using Java 19.0.1 on Legion-R9000P with PID 22008 (E:\Code\Java\big-market\big-market-app\target\classes started by lenovo in E:\Code\Java\big-market)
24-10-16.00:05:43.503 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-10-16.00:05:44.389 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-10-16.00:05:44.393 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-10-16.00:05:44.434 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 0 Redis repository interfaces.
24-10-16.00:05:45.012 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:05:45.014 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:05:45.328 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-10-16.00:05:45.337 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-10-16.00:05:45.337 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-10-16.00:05:45.337 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-10-16.00:05:45.434 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-10-16.00:05:45.434 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1884 ms
24-10-16.00:05:45.772 [main            ] INFO  Version                - Redisson 3.23.4
24-10-16.00:05:46.266 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:05:46.287 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:05:47.647 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-10-16.00:05:47.730 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-10-16.00:05:47.733 [main            ] WARN  AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'; nested exception is org.springframework.boot.web.server.PortInUseException: Port 8091 is already in use
24-10-16.00:05:47.753 [main            ] INFO  Http11NioProtocol      - Pausing ProtocolHandler ["http-nio-8091"]
24-10-16.00:05:47.753 [main            ] INFO  StandardService        - Stopping service [Tomcat]
24-10-16.00:05:47.758 [main            ] INFO  Http11NioProtocol      - Stopping ProtocolHandler ["http-nio-8091"]
24-10-16.00:05:47.759 [main            ] INFO  Http11NioProtocol      - Destroying ProtocolHandler ["http-nio-8091"]
24-10-16.00:05:47.769 [main            ] INFO  ConditionEvaluationReportLoggingListener - 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
24-10-16.00:05:47.784 [main            ] ERROR LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8091 was already in use.

Action:

Identify and stop the process that's listening on port 8091 or configure this application to listen on another port.

24-10-16.00:05:50.006 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:05:50.007 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:05:55.008 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:05:55.010 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:05:59.040 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:05:59.041 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:05:59.104 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:05:59.105 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:05:59.143 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:05:59.143 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:06:09.992 [main            ] INFO  Application            - Starting Application using Java 19.0.1 on Legion-R9000P with PID 32216 (E:\Code\Java\big-market\big-market-app\target\classes started by lenovo in E:\Code\Java\big-market)
24-10-16.00:06:09.993 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-10-16.00:06:10.793 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-10-16.00:06:10.795 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-10-16.00:06:10.833 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 0 Redis repository interfaces.
24-10-16.00:06:11.650 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-10-16.00:06:11.658 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-10-16.00:06:11.658 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-10-16.00:06:11.658 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-10-16.00:06:11.758 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-10-16.00:06:11.758 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1717 ms
24-10-16.00:06:12.076 [main            ] INFO  Version                - Redisson 3.23.4
24-10-16.00:06:12.521 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:06:12.538 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:06:13.814 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-10-16.00:06:13.892 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-10-16.00:06:13.903 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-10-16.00:06:13.905 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.236.132:5672]
24-10-16.00:06:13.948 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#414d2821:0/SimpleConnection@2c7607e5 [delegate=amqp://origami@192.168.236.132:5672/, localPort= 12841]
24-10-16.00:06:14.008 [main            ] INFO  Application            - Started Application in 4.44 seconds (JVM running for 5.119)
24-10-16.00:06:14.173 [RMI TCP Connection(2)-192.168.236.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-10-16.00:06:14.173 [RMI TCP Connection(2)-192.168.236.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-10-16.00:06:14.175 [RMI TCP Connection(2)-192.168.236.1] INFO  DispatcherServlet      - Completed initialization in 2 ms
24-10-16.00:06:14.176 [RMI TCP Connection(1)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:06:14.440 [RMI TCP Connection(1)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:06:14.459 [RMI TCP Connection(1)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:06:14.495 [RMI TCP Connection(1)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:06:15.008 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:06:15.019 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:06:20.001 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:06:20.003 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:06:25.014 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:06:25.016 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:06:27.238 [http-nio-8091-exec-3] INFO  RaffleActivityController - 活动抽奖 user:origami activityId:100301
24-10-16.00:06:27.462 [http-nio-8091-exec-3] INFO  AbstractRaffleActivityPartake - 创建参与活动订单【已存在 未消费】 userId:origami, activityId:100301, userRaffleOrderEntity:{"activityId":100301,"activityName":"测试活动","orderId":"951635479379","orderState":"create","orderTime":1729007702000,"strategyId":100006,"userId":"origami"}
24-10-16.00:06:27.462 [http-nio-8091-exec-3] INFO  RaffleActivityController - 活动抽奖 创建订单 userId:origami activityId:100301 orderId:951635479379
24-10-16.00:06:27.475 [http-nio-8091-exec-3] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: origami strategyId: 100006 ruleModel: rule_default awardId: 107
24-10-16.00:06:27.476 [http-nio-8091-exec-3] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 origami 100006 107 rule_default
24-10-16.00:06:27.476 [http-nio-8091-exec-3] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:06:27.503 [http-nio-8091-exec-3] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:06:27.512 [http-nio-8091-exec-3] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:origami,strategyId:100006,awardId:107
24-10-16.00:06:27.520 [http-nio-8091-exec-3] INFO  DecisionTreeEngine     - 决策树引擎【规则树】，treeId：tree_lock_1，node：rule_lock，code：0001
24-10-16.00:06:27.521 [http-nio-8091-exec-3] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:origami,strategyId:100006,awardId:107,ruleValue:101:1,100
24-10-16.00:06:27.521 [http-nio-8091-exec-3] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:origami,strategyId:100006,awardId:107,luckAwardId:101,awardRuleValue:1,100
24-10-16.00:06:27.522 [http-nio-8091-exec-3] INFO  DecisionTreeEngine     - 决策树引擎【规则树】，treeId：tree_lock_1，node：rule_luck_award，code：0001
24-10-16.00:06:27.522 [http-nio-8091-exec-3] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 origami 100006 101 1,100
24-10-16.00:06:27.589 [http-nio-8091-exec-3] ERROR RaffleActivityController - 活动抽奖失败 userId:origami activityId:100301
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
### The error may exist in file [E:\Code\Java\big-market\big-market-app\target\classes\mybatis\mapper\user_award_record_mapper.xml]
### The error may involve com.origamii.infrastructure.persistent.dao.IUserAwardRecordDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_award_record_000(user_id, activity_id, strategy_id, order_id, award_id, award_title, award_time,                                       award_state, create_time, update_time)         values (?, ?, ?, ?, ?, ?, ?,                 ?, now(), now())
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
; Column 'award_title' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at jdk.proxy2/jdk.proxy2.$Proxy110.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at jdk.proxy2/jdk.proxy2.$Proxy136.insert(Unknown Source)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.lambda$saveUserAwardRecord$0(AwardRepository.java:88)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.saveUserAwardRecord(AwardRepository.java:85)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$FastClassBySpringCGLIB$$ef9e8803.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$EnhancerBySpringCGLIB$$4c1309e0.saveUserAwardRecord(<generated>)
	at com.origamii.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:56)
	at com.origamii.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:139)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1589)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at jdk.proxy2/jdk.proxy2.$Proxy183.update(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 73 common frames omitted
24-10-16.00:06:30.014 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:06:30.015 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:06:35.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:06:35.005 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:06:40.008 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:06:40.011 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:06:45.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:06:45.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:06:50.013 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:06:50.015 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:06:55.009 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:06:55.012 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:07:00.008 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:07:00.010 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:07:05.004 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:07:05.006 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:07:10.013 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:07:10.014 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:07:15.012 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:07:15.013 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:07:20.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:07:20.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:07:25.000 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:07:25.002 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:07:30.010 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:07:30.012 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:07:35.007 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:07:35.008 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:07:35.633 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:07:35.634 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:07:35.757 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:07:35.766 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:07:35.806 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:07:35.806 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:07:38.479 [main            ] INFO  Application            - Starting Application using Java 19.0.1 on Legion-R9000P with PID 19596 (E:\Code\Java\big-market\big-market-app\target\classes started by lenovo in E:\Code\Java\big-market)
24-10-16.00:07:38.480 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-10-16.00:07:39.354 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-10-16.00:07:39.358 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-10-16.00:07:39.405 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 31 ms. Found 0 Redis repository interfaces.
24-10-16.00:07:40.305 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-10-16.00:07:40.313 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-10-16.00:07:40.313 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-10-16.00:07:40.313 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-10-16.00:07:40.417 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-10-16.00:07:40.417 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1897 ms
24-10-16.00:07:40.756 [main            ] INFO  Version                - Redisson 3.23.4
24-10-16.00:07:41.230 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:07:41.247 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:07:42.674 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-10-16.00:07:42.763 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-10-16.00:07:42.775 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-10-16.00:07:42.776 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.236.132:5672]
24-10-16.00:07:42.819 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#52f7fa65:0/SimpleConnection@13cc3984 [delegate=amqp://origami@192.168.236.132:5672/, localPort= 12931]
24-10-16.00:07:42.879 [main            ] INFO  Application            - Started Application in 4.86 seconds (JVM running for 5.83)
24-10-16.00:07:43.085 [RMI TCP Connection(2)-192.168.236.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-10-16.00:07:43.085 [RMI TCP Connection(2)-192.168.236.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-10-16.00:07:43.086 [RMI TCP Connection(2)-192.168.236.1] INFO  DispatcherServlet      - Completed initialization in 1 ms
24-10-16.00:07:43.089 [RMI TCP Connection(1)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:07:43.352 [RMI TCP Connection(1)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:07:43.371 [RMI TCP Connection(1)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:07:43.392 [RMI TCP Connection(1)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:07:45.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:07:45.014 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:07:48.622 [http-nio-8091-exec-3] INFO  RaffleActivityController - 活动抽奖 user:origami activityId:100301
24-10-16.00:07:53.120 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:07:53.122 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:07:53.316 [http-nio-8091-exec-3] INFO  AbstractRaffleActivityPartake - 创建参与活动订单【已存在 未消费】 userId:origami, activityId:100301, userRaffleOrderEntity:{"activityId":100301,"activityName":"测试活动","orderId":"951635479379","orderState":"create","orderTime":1729007702000,"strategyId":100006,"userId":"origami"}
24-10-16.00:07:53.317 [http-nio-8091-exec-3] INFO  RaffleActivityController - 活动抽奖 创建订单 userId:origami activityId:100301 orderId:951635479379
24-10-16.00:07:53.329 [http-nio-8091-exec-3] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: origami strategyId: 100006 ruleModel: rule_default awardId: 102
24-10-16.00:07:53.330 [http-nio-8091-exec-3] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 origami 100006 102 rule_default
24-10-16.00:07:53.331 [http-nio-8091-exec-3] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:07:53.349 [http-nio-8091-exec-3] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:07:53.369 [http-nio-8091-exec-3] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:origami,strategyId:100006,awardId:102
24-10-16.00:07:53.372 [http-nio-8091-exec-3] INFO  RuleStockLogicTreeNode - 规则过滤-扣减库存-成功 userId:origami,strategyId:100006,awardId:102
24-10-16.00:07:53.394 [http-nio-8091-exec-3] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】，treeId：tree_luck_award，node：rule_stock，code：0001
24-10-16.00:07:53.395 [http-nio-8091-exec-3] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 origami 100006 102 
24-10-16.00:08:07.065 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:08:07.067 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:12:25.260 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=4m41s760ms120µs900ns).
24-10-16.00:12:25.260 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=4m18s195ms1µs100ns).
24-10-16.00:12:25.260 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:12:25.265 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=4m41s805ms856µs700ns).
24-10-16.00:12:25.269 [AMQP Connection 192.168.236.132:5672] WARN  ForgivingExceptionHandler - An unexpected connection driver error occurred (Exception message: Connection reset)
24-10-16.00:12:25.305 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:12:25.305 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:12:25.305 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:12:25.305 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:12:25.309 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】 strategyId:100006 awardId:102
24-10-16.00:12:25.342 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:12:25.398 [http-nio-8091-exec-3] ERROR RaffleActivityController - 活动抽奖失败 userId:origami activityId:100301
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
### The error may exist in file [E:\Code\Java\big-market\big-market-app\target\classes\mybatis\mapper\user_award_record_mapper.xml]
### The error may involve com.origamii.infrastructure.persistent.dao.IUserAwardRecordDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_award_record_000(user_id, activity_id, strategy_id, order_id, award_id, award_title, award_time,                                       award_state, create_time, update_time)         values (?, ?, ?, ?, ?, ?, ?,                 ?, now(), now())
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
; Column 'award_title' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at jdk.proxy2/jdk.proxy2.$Proxy110.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at jdk.proxy2/jdk.proxy2.$Proxy136.insert(Unknown Source)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.lambda$saveUserAwardRecord$0(AwardRepository.java:88)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.saveUserAwardRecord(AwardRepository.java:85)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$FastClassBySpringCGLIB$$ef9e8803.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$EnhancerBySpringCGLIB$$abaaf47e.saveUserAwardRecord(<generated>)
	at com.origamii.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:56)
	at com.origamii.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:139)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1589)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at jdk.proxy2/jdk.proxy2.$Proxy183.update(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 73 common frames omitted
24-10-16.00:12:25.485 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:12:25.485 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:12:28.348 [main            ] INFO  Application            - Starting Application using Java 19.0.1 on Legion-R9000P with PID 7608 (E:\Code\Java\big-market\big-market-app\target\classes started by lenovo in E:\Code\Java\big-market)
24-10-16.00:12:28.349 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-10-16.00:12:29.219 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-10-16.00:12:29.221 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-10-16.00:12:29.260 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 25 ms. Found 0 Redis repository interfaces.
24-10-16.00:12:30.135 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-10-16.00:12:30.143 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-10-16.00:12:30.143 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-10-16.00:12:30.143 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-10-16.00:12:30.243 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-10-16.00:12:30.243 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1851 ms
24-10-16.00:12:30.594 [main            ] INFO  Version                - Redisson 3.23.4
24-10-16.00:12:31.049 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:12:31.096 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:12:32.591 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-10-16.00:12:32.703 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-10-16.00:12:32.718 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-10-16.00:12:32.720 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.236.132:5672]
24-10-16.00:12:32.780 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#3e63bd6b:0/SimpleConnection@2351255a [delegate=amqp://origami@192.168.236.132:5672/, localPort= 13174]
24-10-16.00:12:32.842 [main            ] INFO  Application            - Started Application in 4.929 seconds (JVM running for 5.894)
24-10-16.00:12:33.270 [RMI TCP Connection(1)-192.168.236.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-10-16.00:12:33.270 [RMI TCP Connection(1)-192.168.236.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-10-16.00:12:33.272 [RMI TCP Connection(1)-192.168.236.1] INFO  DispatcherServlet      - Completed initialization in 2 ms
24-10-16.00:12:33.280 [RMI TCP Connection(2)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:12:33.561 [RMI TCP Connection(2)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:12:33.579 [RMI TCP Connection(2)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:12:33.602 [RMI TCP Connection(2)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:12:34.423 [http-nio-8091-exec-3] INFO  RaffleActivityController - 活动抽奖 user:origami activityId:100301
24-10-16.00:12:34.670 [http-nio-8091-exec-3] INFO  AbstractRaffleActivityPartake - 创建参与活动订单【已存在 未消费】 userId:origami, activityId:100301, userRaffleOrderEntity:{"activityId":100301,"activityName":"测试活动","orderId":"951635479379","orderState":"create","orderTime":1729007702000,"strategyId":100006,"userId":"origami"}
24-10-16.00:12:34.670 [http-nio-8091-exec-3] INFO  RaffleActivityController - 活动抽奖 创建订单 userId:origami activityId:100301 orderId:951635479379
24-10-16.00:13:00.131 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:13:00.150 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:13:00.182 [http-nio-8091-exec-3] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: origami strategyId: 100006 ruleModel: rule_default awardId: 107
24-10-16.00:13:00.183 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:13:00.183 [http-nio-8091-exec-3] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 origami 100006 107 rule_default
24-10-16.00:13:00.183 [http-nio-8091-exec-3] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:13:00.195 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:13:00.251 [http-nio-8091-exec-3] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:13:00.263 [http-nio-8091-exec-3] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:origami,strategyId:100006,awardId:107
24-10-16.00:13:00.273 [http-nio-8091-exec-3] INFO  DecisionTreeEngine     - 决策树引擎【规则树】，treeId：tree_lock_1，node：rule_lock，code：0001
24-10-16.00:13:00.273 [http-nio-8091-exec-3] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:origami,strategyId:100006,awardId:107,ruleValue:101:1,100
24-10-16.00:13:00.273 [http-nio-8091-exec-3] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:origami,strategyId:100006,awardId:107,luckAwardId:101,awardRuleValue:1,100
24-10-16.00:13:00.273 [http-nio-8091-exec-3] INFO  DecisionTreeEngine     - 决策树引擎【规则树】，treeId：tree_lock_1，node：rule_luck_award，code：0001
24-10-16.00:13:00.274 [http-nio-8091-exec-3] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 origami 100006 101 1,100
24-10-16.00:13:00.341 [http-nio-8091-exec-3] ERROR RaffleActivityController - 活动抽奖失败 userId:origami activityId:100301
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
### The error may exist in file [E:\Code\Java\big-market\big-market-app\target\classes\mybatis\mapper\user_award_record_mapper.xml]
### The error may involve com.origamii.infrastructure.persistent.dao.IUserAwardRecordDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_award_record_000(user_id, activity_id, strategy_id, order_id, award_id, award_title, award_time,                                       award_state, create_time, update_time)         values (?, ?, ?, ?, ?, ?, ?,                 ?, now(), now())
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
; Column 'award_title' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at jdk.proxy2/jdk.proxy2.$Proxy110.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at jdk.proxy2/jdk.proxy2.$Proxy136.insert(Unknown Source)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.lambda$saveUserAwardRecord$0(AwardRepository.java:88)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.saveUserAwardRecord(AwardRepository.java:85)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$FastClassBySpringCGLIB$$ef9e8803.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$EnhancerBySpringCGLIB$$e9a04d5f.saveUserAwardRecord(<generated>)
	at com.origamii.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:56)
	at com.origamii.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:139)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1589)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at jdk.proxy2/jdk.proxy2.$Proxy184.update(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 73 common frames omitted
24-10-16.00:13:01.134 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:13:01.135 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:13:01.177 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:13:01.177 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:13:03.995 [main            ] INFO  Application            - Starting Application using Java 19.0.1 on Legion-R9000P with PID 23132 (E:\Code\Java\big-market\big-market-app\target\classes started by lenovo in E:\Code\Java\big-market)
24-10-16.00:13:03.996 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-10-16.00:13:04.861 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-10-16.00:13:04.865 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-10-16.00:13:04.902 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 24 ms. Found 0 Redis repository interfaces.
24-10-16.00:13:05.792 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-10-16.00:13:05.801 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-10-16.00:13:05.801 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-10-16.00:13:05.801 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-10-16.00:13:05.911 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-10-16.00:13:05.911 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1873 ms
24-10-16.00:13:06.294 [main            ] INFO  Version                - Redisson 3.23.4
24-10-16.00:13:06.743 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:13:06.760 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:13:08.203 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-10-16.00:13:08.304 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-10-16.00:13:08.318 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-10-16.00:13:08.320 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.236.132:5672]
24-10-16.00:13:08.382 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#58afecfd:0/SimpleConnection@f451970 [delegate=amqp://origami@192.168.236.132:5672/, localPort= 13260]
24-10-16.00:13:08.465 [main            ] INFO  Application            - Started Application in 4.912 seconds (JVM running for 5.848)
24-10-16.00:13:08.904 [RMI TCP Connection(2)-192.168.236.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-10-16.00:13:08.905 [RMI TCP Connection(2)-192.168.236.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-10-16.00:13:08.905 [RMI TCP Connection(2)-192.168.236.1] INFO  DispatcherServlet      - Completed initialization in 0 ms
24-10-16.00:13:08.909 [RMI TCP Connection(1)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:13:09.133 [RMI TCP Connection(1)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:13:09.153 [RMI TCP Connection(1)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:13:09.174 [RMI TCP Connection(1)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:13:10.015 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:13:10.027 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:13:12.366 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动抽奖 user:origami activityId:100301
24-10-16.00:13:12.570 [http-nio-8091-exec-2] INFO  AbstractRaffleActivityPartake - 创建参与活动订单【已存在 未消费】 userId:origami, activityId:100301, userRaffleOrderEntity:{"activityId":100301,"activityName":"测试活动","orderId":"951635479379","orderState":"create","orderTime":1729007702000,"strategyId":100006,"userId":"origami"}
24-10-16.00:13:12.571 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动抽奖 创建订单 userId:origami activityId:100301 orderId:951635479379
24-10-16.00:13:19.464 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:13:19.471 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:15:46.150 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=2m36s876ms147µs500ns).
24-10-16.00:15:46.150 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=2m36s907ms210µs300ns).
24-10-16.00:15:46.151 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:15:46.663 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:15:49.085 [http-nio-8091-exec-2] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: origami strategyId: 100006 ruleModel: rule_default awardId: 106
24-10-16.00:15:49.848 [http-nio-8091-exec-2] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 origami 100006 106 rule_default
24-10-16.00:15:50.490 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:15:50.493 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:15:51.854 [http-nio-8091-exec-2] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:15:52.008 [http-nio-8091-exec-2] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:15:52.035 [http-nio-8091-exec-2] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:origami,strategyId:100006,awardId:106
24-10-16.00:15:52.059 [http-nio-8091-exec-2] INFO  DecisionTreeEngine     - 决策树引擎【规则树】，treeId：tree_lock_1，node：rule_lock，code：0001
24-10-16.00:15:52.062 [http-nio-8091-exec-2] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:origami,strategyId:100006,awardId:106,ruleValue:101:1,100
24-10-16.00:15:52.062 [http-nio-8091-exec-2] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:origami,strategyId:100006,awardId:106,luckAwardId:101,awardRuleValue:1,100
24-10-16.00:15:52.065 [http-nio-8091-exec-2] INFO  DecisionTreeEngine     - 决策树引擎【规则树】，treeId：tree_lock_1，node：rule_luck_award，code：0001
24-10-16.00:15:58.602 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:15:58.606 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:15:58.606 [http-nio-8091-exec-2] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 origami 100006 101 1,100
24-10-16.00:16:14.489 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:16:14.498 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:16:47.096 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m947ms220µs200ns).
24-10-16.00:16:47.096 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m947ms383µs700ns).
24-10-16.00:16:47.096 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=48s494ms955µs300ns).
24-10-16.00:16:47.096 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:16:47.113 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:16:47.143 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:16:47.144 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:16:47.521 [http-nio-8091-exec-2] ERROR RaffleActivityController - 活动抽奖失败 userId:origami activityId:100301
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
### The error may exist in file [E:\Code\Java\big-market\big-market-app\target\classes\mybatis\mapper\user_award_record_mapper.xml]
### The error may involve com.origamii.infrastructure.persistent.dao.IUserAwardRecordDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_award_record_000(user_id, activity_id, strategy_id, order_id, award_id, award_title, award_time,                                       award_state, create_time, update_time)         values (?, ?, ?, ?, ?, ?, ?,                 ?, now(), now())
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
; Column 'award_title' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at jdk.proxy2/jdk.proxy2.$Proxy110.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at jdk.proxy2/jdk.proxy2.$Proxy136.insert(Unknown Source)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.lambda$saveUserAwardRecord$0(AwardRepository.java:88)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.saveUserAwardRecord(AwardRepository.java:85)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$FastClassBySpringCGLIB$$ef9e8803.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$EnhancerBySpringCGLIB$$e9a04d5f.saveUserAwardRecord(<generated>)
	at com.origamii.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:56)
	at com.origamii.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:139)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1589)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at jdk.proxy2/jdk.proxy2.$Proxy183.update(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 73 common frames omitted
24-10-16.00:16:48.109 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:16:48.110 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:16:48.147 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:16:48.147 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:16:54.433 [main            ] INFO  Application            - Starting Application using Java 19.0.1 on Legion-R9000P with PID 14576 (E:\Code\Java\big-market\big-market-app\target\classes started by lenovo in E:\Code\Java\big-market)
24-10-16.00:16:54.435 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-10-16.00:16:55.242 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-10-16.00:16:55.244 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-10-16.00:16:55.282 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 27 ms. Found 0 Redis repository interfaces.
24-10-16.00:16:56.186 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-10-16.00:16:56.193 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-10-16.00:16:56.193 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-10-16.00:16:56.193 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-10-16.00:16:56.300 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-10-16.00:16:56.300 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1819 ms
24-10-16.00:16:56.660 [main            ] INFO  Version                - Redisson 3.23.4
24-10-16.00:16:57.103 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:16:57.123 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:16:58.527 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-10-16.00:16:58.603 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-10-16.00:16:58.615 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-10-16.00:16:58.617 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.236.132:5672]
24-10-16.00:16:58.662 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#6694fb1b:0/SimpleConnection@7dd847a2 [delegate=amqp://origami@192.168.236.132:5672/, localPort= 13609]
24-10-16.00:16:58.720 [main            ] INFO  Application            - Started Application in 4.755 seconds (JVM running for 5.44)
24-10-16.00:16:58.827 [RMI TCP Connection(3)-192.168.236.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-10-16.00:16:58.827 [RMI TCP Connection(3)-192.168.236.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-10-16.00:16:58.828 [RMI TCP Connection(3)-192.168.236.1] INFO  DispatcherServlet      - Completed initialization in 1 ms
24-10-16.00:16:58.830 [RMI TCP Connection(2)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:16:59.030 [RMI TCP Connection(2)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:16:59.048 [RMI TCP Connection(2)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:16:59.067 [RMI TCP Connection(2)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:17:00.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:17:00.014 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:17:05.010 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:17:05.011 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:17:10.010 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:17:10.011 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:17:15.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:17:15.002 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:17:20.007 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:17:20.008 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:17:25.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:17:25.007 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:17:30.014 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:17:30.016 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:17:35.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:17:35.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:17:40.012 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:17:40.013 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:17:45.015 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:17:45.016 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:17:50.004 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:17:50.006 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:17:55.014 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:17:55.015 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:18:00.013 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:18:00.015 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:18:05.002 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:18:05.004 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:18:10.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:18:10.004 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:18:10.985 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动抽奖 user:origami activityId:100301
24-10-16.00:18:11.204 [http-nio-8091-exec-2] INFO  AbstractRaffleActivityPartake - 创建参与活动订单【已存在 未消费】 userId:origami, activityId:100301, userRaffleOrderEntity:{"activityId":100301,"activityName":"测试活动","orderId":"951635479379","orderState":"create","orderTime":1729007702000,"strategyId":100006,"userId":"origami"}
24-10-16.00:18:11.204 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动抽奖 创建订单 userId:origami activityId:100301 orderId:951635479379
24-10-16.00:18:11.219 [http-nio-8091-exec-2] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: origami strategyId: 100006 ruleModel: rule_default awardId: 104
24-10-16.00:18:11.220 [http-nio-8091-exec-2] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 origami 100006 104 rule_default
24-10-16.00:18:11.220 [http-nio-8091-exec-2] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:18:11.241 [http-nio-8091-exec-2] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:18:11.250 [http-nio-8091-exec-2] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:origami,strategyId:100006,awardId:104
24-10-16.00:18:11.254 [http-nio-8091-exec-2] INFO  RuleStockLogicTreeNode - 规则过滤-扣减库存-成功 userId:origami,strategyId:100006,awardId:104
24-10-16.00:18:11.275 [http-nio-8091-exec-2] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】，treeId：tree_luck_award，node：rule_stock，code：0001
24-10-16.00:18:11.276 [http-nio-8091-exec-2] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 origami 100006 104 
24-10-16.00:18:11.345 [http-nio-8091-exec-2] ERROR RaffleActivityController - 活动抽奖失败 userId:origami activityId:100301
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
### The error may exist in file [E:\Code\Java\big-market\big-market-app\target\classes\mybatis\mapper\user_award_record_mapper.xml]
### The error may involve com.origamii.infrastructure.persistent.dao.IUserAwardRecordDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_award_record_000(user_id, activity_id, strategy_id, order_id, award_id, award_title, award_time,                                       award_state, create_time, update_time)         values (?, ?, ?, ?, ?, ?, ?,                 ?, now(), now())
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
; Column 'award_title' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at jdk.proxy2/jdk.proxy2.$Proxy110.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at jdk.proxy2/jdk.proxy2.$Proxy136.insert(Unknown Source)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.lambda$saveUserAwardRecord$0(AwardRepository.java:88)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.saveUserAwardRecord(AwardRepository.java:85)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$FastClassBySpringCGLIB$$ef9e8803.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$EnhancerBySpringCGLIB$$4c1309e0.saveUserAwardRecord(<generated>)
	at com.origamii.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:56)
	at com.origamii.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:139)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1589)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at jdk.proxy2/jdk.proxy2.$Proxy183.update(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 73 common frames omitted
24-10-16.00:18:15.007 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:18:15.008 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:18:15.011 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】 strategyId:100006 awardId:104
24-10-16.00:18:20.012 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:18:20.014 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:18:25.007 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:18:25.008 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:18:27.651 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:18:27.654 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:18:28.582 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:18:28.583 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:18:28.622 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:18:28.623 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:18:34.663 [main            ] INFO  Application            - Starting Application using Java 19.0.1 on Legion-R9000P with PID 22436 (E:\Code\Java\big-market\big-market-app\target\classes started by lenovo in E:\Code\Java\big-market)
24-10-16.00:18:34.665 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-10-16.00:18:35.469 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-10-16.00:18:35.471 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-10-16.00:18:35.511 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 0 Redis repository interfaces.
24-10-16.00:18:36.357 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-10-16.00:18:36.365 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-10-16.00:18:36.365 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-10-16.00:18:36.366 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-10-16.00:18:36.460 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-10-16.00:18:36.461 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1755 ms
24-10-16.00:18:36.768 [main            ] INFO  Version                - Redisson 3.23.4
24-10-16.00:18:37.195 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:18:37.210 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:18:38.514 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-10-16.00:18:38.589 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-10-16.00:18:38.602 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-10-16.00:18:38.604 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.236.132:5672]
24-10-16.00:18:38.651 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#49ea13b6:0/SimpleConnection@7dd847a2 [delegate=amqp://origami@192.168.236.132:5672/, localPort= 13774]
24-10-16.00:18:38.706 [main            ] INFO  Application            - Started Application in 4.452 seconds (JVM running for 5.1)
24-10-16.00:18:38.914 [RMI TCP Connection(3)-192.168.236.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-10-16.00:18:38.914 [RMI TCP Connection(3)-192.168.236.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-10-16.00:18:38.915 [RMI TCP Connection(3)-192.168.236.1] INFO  DispatcherServlet      - Completed initialization in 1 ms
24-10-16.00:18:38.916 [RMI TCP Connection(2)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:18:39.099 [RMI TCP Connection(2)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:18:39.116 [RMI TCP Connection(2)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:18:39.136 [RMI TCP Connection(2)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:18:40.014 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:18:40.024 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:18:44.535 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动抽奖 user:origami activityId:100301
24-10-16.00:18:44.710 [http-nio-8091-exec-2] INFO  AbstractRaffleActivityPartake - 创建参与活动订单【已存在 未消费】 userId:origami, activityId:100301, userRaffleOrderEntity:{"activityId":100301,"activityName":"测试活动","orderId":"951635479379","orderState":"create","orderTime":1729007702000,"strategyId":100006,"userId":"origami"}
24-10-16.00:18:44.710 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动抽奖 创建订单 userId:origami activityId:100301 orderId:951635479379
24-10-16.00:18:44.724 [http-nio-8091-exec-2] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: origami strategyId: 100006 ruleModel: rule_default awardId: 101
24-10-16.00:18:44.725 [http-nio-8091-exec-2] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 origami 100006 101 rule_default
24-10-16.00:18:44.726 [http-nio-8091-exec-2] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:18:44.742 [http-nio-8091-exec-2] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:18:44.759 [http-nio-8091-exec-2] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:origami,strategyId:100006,awardId:101
24-10-16.00:18:44.762 [http-nio-8091-exec-2] INFO  RuleStockLogicTreeNode - 规则过滤-扣减库存-成功 userId:origami,strategyId:100006,awardId:101
24-10-16.00:18:44.782 [http-nio-8091-exec-2] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】，treeId：tree_luck_award，node：rule_stock，code：0001
24-10-16.00:18:44.783 [http-nio-8091-exec-2] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 origami 100006 101 
24-10-16.00:18:44.846 [http-nio-8091-exec-2] ERROR RaffleActivityController - 活动抽奖失败 userId:origami activityId:100301
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
### The error may exist in file [E:\Code\Java\big-market\big-market-app\target\classes\mybatis\mapper\user_award_record_mapper.xml]
### The error may involve com.origamii.infrastructure.persistent.dao.IUserAwardRecordDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_award_record_000(user_id, activity_id, strategy_id, order_id, award_id, award_title, award_time,                                       award_state, create_time, update_time)         values (?, ?, ?, ?, ?, ?, ?,                 ?, now(), now())
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
; Column 'award_title' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at jdk.proxy2/jdk.proxy2.$Proxy110.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at jdk.proxy2/jdk.proxy2.$Proxy136.insert(Unknown Source)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.lambda$saveUserAwardRecord$0(AwardRepository.java:88)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.saveUserAwardRecord(AwardRepository.java:85)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$FastClassBySpringCGLIB$$ef9e8803.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$EnhancerBySpringCGLIB$$4c1309e0.saveUserAwardRecord(<generated>)
	at com.origamii.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:56)
	at com.origamii.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:139)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1589)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at jdk.proxy2/jdk.proxy2.$Proxy183.update(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 73 common frames omitted
24-10-16.00:18:45.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:18:45.008 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:18:50.007 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:18:50.009 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】 strategyId:100006 awardId:101
24-10-16.00:18:50.023 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:18:51.787 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:18:51.788 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:18:51.812 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:18:51.812 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:18:51.852 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:18:51.852 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:18:54.623 [main            ] INFO  Application            - Starting Application using Java 19.0.1 on Legion-R9000P with PID 13848 (E:\Code\Java\big-market\big-market-app\target\classes started by lenovo in E:\Code\Java\big-market)
24-10-16.00:18:54.625 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-10-16.00:18:55.476 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-10-16.00:18:55.479 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-10-16.00:18:55.520 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 0 Redis repository interfaces.
24-10-16.00:18:56.454 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-10-16.00:18:56.464 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-10-16.00:18:56.464 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-10-16.00:18:56.464 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-10-16.00:18:56.583 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-10-16.00:18:56.584 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1919 ms
24-10-16.00:18:56.943 [main            ] INFO  Version                - Redisson 3.23.4
24-10-16.00:18:57.413 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:18:57.429 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:18:58.808 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-10-16.00:18:58.895 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-10-16.00:18:58.908 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-10-16.00:18:58.910 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.236.132:5672]
24-10-16.00:18:58.956 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#2c4be45f:0/SimpleConnection@13fad0c7 [delegate=amqp://origami@192.168.236.132:5672/, localPort= 13843]
24-10-16.00:18:59.019 [main            ] INFO  Application            - Started Application in 4.823 seconds (JVM running for 5.799)
24-10-16.00:18:59.589 [RMI TCP Connection(2)-192.168.236.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-10-16.00:18:59.589 [RMI TCP Connection(2)-192.168.236.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-10-16.00:18:59.590 [RMI TCP Connection(2)-192.168.236.1] INFO  DispatcherServlet      - Completed initialization in 1 ms
24-10-16.00:18:59.592 [RMI TCP Connection(1)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:18:59.804 [RMI TCP Connection(1)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:18:59.827 [RMI TCP Connection(1)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:18:59.845 [RMI TCP Connection(1)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:19:00.004 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:19:00.020 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:19:05.011 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:19:05.013 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:19:06.067 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动抽奖 user:origami activityId:100301
24-10-16.00:19:06.264 [http-nio-8091-exec-2] INFO  AbstractRaffleActivityPartake - 创建参与活动订单【已存在 未消费】 userId:origami, activityId:100301, userRaffleOrderEntity:{"activityId":100301,"activityName":"测试活动","orderId":"951635479379","orderState":"create","orderTime":1729007702000,"strategyId":100006,"userId":"origami"}
24-10-16.00:19:06.265 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动抽奖 创建订单 userId:origami activityId:100301 orderId:951635479379
24-10-16.00:19:08.955 [http-nio-8091-exec-2] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: origami strategyId: 100006 ruleModel: rule_default awardId: 108
24-10-16.00:19:08.955 [http-nio-8091-exec-2] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 origami 100006 108 rule_default
24-10-16.00:19:08.955 [http-nio-8091-exec-2] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:19:08.973 [http-nio-8091-exec-2] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:19:09.021 [http-nio-8091-exec-2] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:origami,strategyId:100006,awardId:108
24-10-16.00:19:09.040 [http-nio-8091-exec-2] INFO  DecisionTreeEngine     - 决策树引擎【规则树】，treeId：tree_lock_2，node：rule_lock，code：0001
24-10-16.00:19:09.041 [http-nio-8091-exec-2] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:origami,strategyId:100006,awardId:108,ruleValue:101:1,100
24-10-16.00:19:09.041 [http-nio-8091-exec-2] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:origami,strategyId:100006,awardId:108,luckAwardId:101,awardRuleValue:1,100
24-10-16.00:19:09.042 [http-nio-8091-exec-2] INFO  DecisionTreeEngine     - 决策树引擎【规则树】，treeId：tree_lock_2，node：rule_luck_award，code：0001
24-10-16.00:19:09.042 [http-nio-8091-exec-2] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 origami 100006 101 1,100
24-10-16.00:19:47.753 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m8s780ms958µs800ns).
24-10-16.00:19:47.753 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=47s797ms350µs100ns).
24-10-16.00:19:47.753 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:19:47.757 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=47s844ms75µs200ns).
24-10-16.00:19:49.060 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:19:52.126 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:20:00.439 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:23:06.617 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=3m18s863ms250µs900ns).
24-10-16.00:23:06.617 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=3m18s863ms252µs800ns).
24-10-16.00:23:06.617 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=3m18s863ms250µs800ns).
24-10-16.00:23:06.624 [AMQP Connection 192.168.236.132:5672] WARN  ForgivingExceptionHandler - An unexpected connection driver error occurred (Exception message: Connection reset)
24-10-16.00:23:06.628 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:23:06.662 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:23:06.662 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:23:06.662 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:23:06.662 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:23:06.772 [http-nio-8091-exec-2] ERROR RaffleActivityController - 活动抽奖失败 userId:origami activityId:100301
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
### The error may exist in file [E:\Code\Java\big-market\big-market-app\target\classes\mybatis\mapper\user_award_record_mapper.xml]
### The error may involve com.origamii.infrastructure.persistent.dao.IUserAwardRecordDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_award_record_000(user_id, activity_id, strategy_id, order_id, award_id, award_title, award_time,                                       award_state, create_time, update_time)         values (?, ?, ?, ?, ?, ?, ?,                 ?, now(), now())
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
; Column 'award_title' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at jdk.proxy2/jdk.proxy2.$Proxy110.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at jdk.proxy2/jdk.proxy2.$Proxy136.insert(Unknown Source)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.lambda$saveUserAwardRecord$0(AwardRepository.java:88)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.saveUserAwardRecord(AwardRepository.java:85)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$FastClassBySpringCGLIB$$ef9e8803.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$EnhancerBySpringCGLIB$$94fefb47.saveUserAwardRecord(<generated>)
	at com.origamii.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:56)
	at com.origamii.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:139)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1589)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at jdk.proxy2/jdk.proxy2.$Proxy183.update(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 73 common frames omitted
24-10-16.00:23:06.822 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:23:06.823 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:23:10.022 [main            ] INFO  Application            - Starting Application using Java 19.0.1 on Legion-R9000P with PID 25772 (E:\Code\Java\big-market\big-market-app\target\classes started by lenovo in E:\Code\Java\big-market)
24-10-16.00:23:10.023 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-10-16.00:23:10.843 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-10-16.00:23:10.846 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-10-16.00:23:10.883 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 0 Redis repository interfaces.
24-10-16.00:23:11.688 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-10-16.00:23:11.695 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-10-16.00:23:11.695 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-10-16.00:23:11.695 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-10-16.00:23:11.793 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-10-16.00:23:11.794 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1730 ms
24-10-16.00:23:12.133 [main            ] INFO  Version                - Redisson 3.23.4
24-10-16.00:23:12.606 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:23:12.624 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:23:14.058 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-10-16.00:23:14.139 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-10-16.00:23:14.151 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-10-16.00:23:14.152 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.236.132:5672]
24-10-16.00:23:14.195 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#49ea13b6:0/SimpleConnection@75b25ec3 [delegate=amqp://origami@192.168.236.132:5672/, localPort= 14011]
24-10-16.00:23:14.255 [main            ] INFO  Application            - Started Application in 4.649 seconds (JVM running for 5.311)
24-10-16.00:23:14.408 [RMI TCP Connection(5)-192.168.236.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-10-16.00:23:14.409 [RMI TCP Connection(5)-192.168.236.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-10-16.00:23:14.410 [RMI TCP Connection(5)-192.168.236.1] INFO  DispatcherServlet      - Completed initialization in 1 ms
24-10-16.00:23:14.411 [RMI TCP Connection(4)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:23:14.599 [RMI TCP Connection(4)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:23:14.616 [RMI TCP Connection(4)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:23:14.633 [RMI TCP Connection(4)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:23:15.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:23:15.021 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:23:20.014 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:23:20.020 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:23:23.914 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:23:23.915 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:23:24.328 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:23:24.328 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:23:24.365 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:23:24.365 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:23:33.048 [main            ] INFO  Application            - Starting Application using Java 19.0.1 on Legion-R9000P with PID 24072 (E:\Code\Java\big-market\big-market-app\target\classes started by lenovo in E:\Code\Java\big-market)
24-10-16.00:23:33.051 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-10-16.00:23:33.874 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-10-16.00:23:33.877 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-10-16.00:23:33.914 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 0 Redis repository interfaces.
24-10-16.00:23:34.751 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-10-16.00:23:34.758 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-10-16.00:23:34.758 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-10-16.00:23:34.758 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-10-16.00:23:34.852 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-10-16.00:23:34.852 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1754 ms
24-10-16.00:23:35.176 [main            ] INFO  Version                - Redisson 3.23.4
24-10-16.00:23:35.610 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:23:35.625 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:23:36.917 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-10-16.00:23:36.995 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-10-16.00:23:37.008 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-10-16.00:23:37.010 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.236.132:5672]
24-10-16.00:23:37.053 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#49ea13b6:0/SimpleConnection@2c7607e5 [delegate=amqp://origami@192.168.236.132:5672/, localPort= 14059]
24-10-16.00:23:37.111 [main            ] INFO  Application            - Started Application in 4.488 seconds (JVM running for 5.168)
24-10-16.00:23:37.235 [RMI TCP Connection(2)-192.168.236.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-10-16.00:23:37.236 [RMI TCP Connection(2)-192.168.236.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-10-16.00:23:37.237 [RMI TCP Connection(2)-192.168.236.1] INFO  DispatcherServlet      - Completed initialization in 1 ms
24-10-16.00:23:37.239 [RMI TCP Connection(1)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:23:37.482 [RMI TCP Connection(1)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:23:37.499 [RMI TCP Connection(1)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:23:37.518 [RMI TCP Connection(1)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:23:40.011 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:23:40.023 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:23:44.521 [http-nio-8091-exec-3] INFO  RaffleActivityController - 活动抽奖 user:origami activityId:100301
24-10-16.00:23:44.728 [http-nio-8091-exec-3] INFO  AbstractRaffleActivityPartake - 创建参与活动订单【已存在 未消费】 userId:origami, activityId:100301, userRaffleOrderEntity:{"activityId":100301,"activityName":"测试活动","orderId":"951635479379","orderState":"create","orderTime":1729007702000,"strategyId":100006,"userId":"origami"}
24-10-16.00:23:44.728 [http-nio-8091-exec-3] INFO  RaffleActivityController - 活动抽奖 创建订单 userId:origami activityId:100301 orderId:951635479379
24-10-16.00:23:44.739 [http-nio-8091-exec-3] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: origami strategyId: 100006 ruleModel: rule_default awardId: 104
24-10-16.00:23:44.740 [http-nio-8091-exec-3] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 origami 100006 104 rule_default
24-10-16.00:23:44.743 [http-nio-8091-exec-3] ERROR RaffleActivityController - 活动抽奖失败 userId:origami activityId:100301
org.apache.ibatis.binding.BindingException: Invalid bound statement (not found): com.origamii.infrastructure.persistent.dao.IStrategyAwardDao.queryStrategyAwardRuleModel
	at org.apache.ibatis.binding.MapperMethod$SqlCommand.<init>(MapperMethod.java:235)
	at org.apache.ibatis.binding.MapperMethod.<init>(MapperMethod.java:53)
	at org.apache.ibatis.binding.MapperProxy.lambda$cachedInvoker$0(MapperProxy.java:115)
	at java.base/java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1708)
	at org.apache.ibatis.binding.MapperProxy.cachedInvoker(MapperProxy.java:102)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at jdk.proxy2/jdk.proxy2.$Proxy130.queryStrategyAwardRuleModel(Unknown Source)
	at com.origamii.infrastructure.persistent.repository.StrategyRepository.queryStrategyAwardRuleModel(StrategyRepository.java:284)
	at com.origamii.infrastructure.persistent.repository.StrategyRepository$$FastClassBySpringCGLIB$$cec89f21.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.origamii.infrastructure.persistent.repository.StrategyRepository$$EnhancerBySpringCGLIB$$f951b1fa.queryStrategyAwardRuleModel(<generated>)
	at com.origamii.domain.strategy.service.raffle.DefaultRaffleStrategy.raffleLogicTree(DefaultRaffleStrategy.java:61)
	at com.origamii.domain.strategy.service.AbstractRaffleStrategy.performRaffle(AbstractRaffleStrategy.java:65)
	at com.origamii.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:123)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1589)
24-10-16.00:23:45.000 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:23:45.000 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:23:50.009 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:23:50.011 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:23:55.007 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:23:55.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:24:00.010 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:24:00.012 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:24:00.344 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:24:00.345 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:24:01.316 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:24:01.316 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:24:01.353 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:24:01.353 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:24:03.672 [main            ] INFO  Application            - Starting Application using Java 19.0.1 on Legion-R9000P with PID 29392 (E:\Code\Java\big-market\big-market-app\target\classes started by lenovo in E:\Code\Java\big-market)
24-10-16.00:24:03.674 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-10-16.00:24:04.501 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-10-16.00:24:04.504 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-10-16.00:24:04.541 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 0 Redis repository interfaces.
24-10-16.00:24:05.345 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-10-16.00:24:05.352 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-10-16.00:24:05.353 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-10-16.00:24:05.353 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-10-16.00:24:05.449 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-10-16.00:24:05.449 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1728 ms
24-10-16.00:24:05.765 [main            ] INFO  Version                - Redisson 3.23.4
24-10-16.00:24:06.207 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:24:06.223 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:24:07.513 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-10-16.00:24:07.593 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-10-16.00:24:07.605 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-10-16.00:24:07.606 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.236.132:5672]
24-10-16.00:24:07.652 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#49ea13b6:0/SimpleConnection@7dd847a2 [delegate=amqp://origami@192.168.236.132:5672/, localPort= 14114]
24-10-16.00:24:07.715 [main            ] INFO  Application            - Started Application in 4.452 seconds (JVM running for 5.064)
24-10-16.00:24:07.933 [RMI TCP Connection(2)-192.168.236.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-10-16.00:24:07.933 [RMI TCP Connection(2)-192.168.236.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-10-16.00:24:07.935 [RMI TCP Connection(2)-192.168.236.1] INFO  DispatcherServlet      - Completed initialization in 2 ms
24-10-16.00:24:07.938 [RMI TCP Connection(1)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:24:08.175 [RMI TCP Connection(1)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:24:08.193 [RMI TCP Connection(1)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:24:08.221 [RMI TCP Connection(1)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:24:10.016 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:24:10.026 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:24:12.431 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动抽奖 user:origami activityId:100301
24-10-16.00:24:12.630 [http-nio-8091-exec-2] INFO  AbstractRaffleActivityPartake - 创建参与活动订单【已存在 未消费】 userId:origami, activityId:100301, userRaffleOrderEntity:{"activityId":100301,"activityName":"测试活动","orderId":"951635479379","orderState":"create","orderTime":1729007702000,"strategyId":100006,"userId":"origami"}
24-10-16.00:24:12.630 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动抽奖 创建订单 userId:origami activityId:100301 orderId:951635479379
24-10-16.00:24:12.642 [http-nio-8091-exec-2] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: origami strategyId: 100006 ruleModel: rule_default awardId: 108
24-10-16.00:24:12.644 [http-nio-8091-exec-2] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 origami 100006 108 rule_default
24-10-16.00:24:12.645 [http-nio-8091-exec-2] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:24:12.661 [http-nio-8091-exec-2] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:24:12.669 [http-nio-8091-exec-2] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:origami,strategyId:100006,awardId:108
24-10-16.00:24:12.675 [http-nio-8091-exec-2] INFO  DecisionTreeEngine     - 决策树引擎【规则树】，treeId：tree_lock_2，node：rule_lock，code：0001
24-10-16.00:24:12.675 [http-nio-8091-exec-2] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:origami,strategyId:100006,awardId:108,ruleValue:101:1,100
24-10-16.00:24:12.675 [http-nio-8091-exec-2] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:origami,strategyId:100006,awardId:108,luckAwardId:101,awardRuleValue:1,100
24-10-16.00:24:12.676 [http-nio-8091-exec-2] INFO  DecisionTreeEngine     - 决策树引擎【规则树】，treeId：tree_lock_2，node：rule_luck_award，code：0001
24-10-16.00:24:12.676 [http-nio-8091-exec-2] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 origami 100006 101 1,100
24-10-16.00:24:12.735 [http-nio-8091-exec-2] ERROR RaffleActivityController - 活动抽奖失败 userId:origami activityId:100301
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
### The error may exist in file [E:\Code\Java\big-market\big-market-app\target\classes\mybatis\mapper\user_award_record_mapper.xml]
### The error may involve com.origamii.infrastructure.persistent.dao.IUserAwardRecordDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_award_record_000(user_id, activity_id, strategy_id, order_id, award_id, award_title, award_time,                                       award_state, create_time, update_time)         values (?, ?, ?, ?, ?, ?, ?,                 ?, now(), now())
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
; Column 'award_title' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at jdk.proxy2/jdk.proxy2.$Proxy110.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at jdk.proxy2/jdk.proxy2.$Proxy136.insert(Unknown Source)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.lambda$saveUserAwardRecord$0(AwardRepository.java:88)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.saveUserAwardRecord(AwardRepository.java:85)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$FastClassBySpringCGLIB$$ef9e8803.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$EnhancerBySpringCGLIB$$4c1309e0.saveUserAwardRecord(<generated>)
	at com.origamii.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:56)
	at com.origamii.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:139)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1589)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at jdk.proxy2/jdk.proxy2.$Proxy183.update(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 73 common frames omitted
24-10-16.00:24:15.000 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:24:15.002 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:24:20.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:24:20.002 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:24:25.004 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:24:25.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:24:30.004 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:24:30.006 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:24:35.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:24:35.018 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:24:38.177 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:24:38.178 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:24:38.987 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:24:38.987 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:24:39.029 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:24:39.029 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:24:41.684 [main            ] INFO  Application            - Starting Application using Java 19.0.1 on Legion-R9000P with PID 31872 (E:\Code\Java\big-market\big-market-app\target\classes started by lenovo in E:\Code\Java\big-market)
24-10-16.00:24:41.685 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-10-16.00:24:42.538 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-10-16.00:24:42.540 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-10-16.00:24:42.582 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 0 Redis repository interfaces.
24-10-16.00:24:43.433 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-10-16.00:24:43.442 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-10-16.00:24:43.442 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-10-16.00:24:43.442 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-10-16.00:24:43.548 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-10-16.00:24:43.548 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1815 ms
24-10-16.00:24:43.902 [main            ] INFO  Version                - Redisson 3.23.4
24-10-16.00:24:44.381 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:24:44.400 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:24:45.717 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-10-16.00:24:45.809 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-10-16.00:24:45.824 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-10-16.00:24:45.825 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.236.132:5672]
24-10-16.00:24:45.870 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#2c4be45f:0/SimpleConnection@43414b88 [delegate=amqp://origami@192.168.236.132:5672/, localPort= 14179]
24-10-16.00:24:45.932 [main            ] INFO  Application            - Started Application in 4.676 seconds (JVM running for 5.628)
24-10-16.00:24:46.177 [RMI TCP Connection(2)-192.168.236.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-10-16.00:24:46.178 [RMI TCP Connection(2)-192.168.236.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-10-16.00:24:46.181 [RMI TCP Connection(1)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:24:46.181 [RMI TCP Connection(2)-192.168.236.1] INFO  DispatcherServlet      - Completed initialization in 3 ms
24-10-16.00:24:46.467 [RMI TCP Connection(1)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:24:46.485 [RMI TCP Connection(1)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:24:46.504 [RMI TCP Connection(1)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:24:50.008 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:24:50.018 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:24:53.525 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动抽奖 user:origami activityId:100301
24-10-16.00:24:53.759 [http-nio-8091-exec-2] INFO  AbstractRaffleActivityPartake - 创建参与活动订单【已存在 未消费】 userId:origami, activityId:100301, userRaffleOrderEntity:{"activityId":100301,"activityName":"测试活动","orderId":"951635479379","orderState":"create","orderTime":1729007702000,"strategyId":100006,"userId":"origami"}
24-10-16.00:24:53.759 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动抽奖 创建订单 userId:origami activityId:100301 orderId:951635479379
24-10-16.00:24:57.460 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:24:57.463 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:25:03.872 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:25:04.400 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:25:05.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:25:16.666 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:25:16.700 [http-nio-8091-exec-2] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: origami strategyId: 100006 ruleModel: rule_default awardId: 107
24-10-16.00:25:16.705 [http-nio-8091-exec-2] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 origami 100006 107 rule_default
24-10-16.00:25:16.706 [http-nio-8091-exec-2] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:25:16.893 [http-nio-8091-exec-2] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:25:16.926 [http-nio-8091-exec-2] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:origami,strategyId:100006,awardId:107
24-10-16.00:25:16.949 [http-nio-8091-exec-2] INFO  DecisionTreeEngine     - 决策树引擎【规则树】，treeId：tree_lock_1，node：rule_lock，code：0001
24-10-16.00:25:16.951 [http-nio-8091-exec-2] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:origami,strategyId:100006,awardId:107,ruleValue:101:1,100
24-10-16.00:25:16.951 [http-nio-8091-exec-2] INFO  RuleLuckAwardLogicTreeNode - 规则过滤-兜底奖品 userId:origami,strategyId:100006,awardId:107,luckAwardId:101,awardRuleValue:1,100
24-10-16.00:25:16.953 [http-nio-8091-exec-2] INFO  DecisionTreeEngine     - 决策树引擎【规则树】，treeId：tree_lock_1，node：rule_luck_award，code：0001
24-10-16.00:25:16.954 [http-nio-8091-exec-2] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 origami 100006 101 1,100
24-10-16.00:25:48.988 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m2s94ms276µs700ns).
24-10-16.00:25:48.988 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:25:50.149 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:27:12.371 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m23s383ms377µs200ns).
24-10-16.00:27:12.371 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m23s383ms481µs300ns).
24-10-16.00:27:12.371 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=1m23s383ms565µs200ns).
24-10-16.00:27:12.375 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:27:15.304 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:27:20.262 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:27:20.335 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:27:20.336 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:27:20.699 [http-nio-8091-exec-2] ERROR RaffleActivityController - 活动抽奖失败 userId:origami activityId:100301
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
### The error may exist in file [E:\Code\Java\big-market\big-market-app\target\classes\mybatis\mapper\user_award_record_mapper.xml]
### The error may involve com.origamii.infrastructure.persistent.dao.IUserAwardRecordDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_award_record_000(user_id, activity_id, strategy_id, order_id, award_id, award_title, award_time,                                       award_state, create_time, update_time)         values (?, ?, ?, ?, ?, ?, ?,                 ?, now(), now())
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
; Column 'award_title' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at jdk.proxy2/jdk.proxy2.$Proxy110.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at jdk.proxy2/jdk.proxy2.$Proxy136.insert(Unknown Source)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.lambda$saveUserAwardRecord$0(AwardRepository.java:88)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.saveUserAwardRecord(AwardRepository.java:85)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$FastClassBySpringCGLIB$$ef9e8803.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$EnhancerBySpringCGLIB$$94fefb47.saveUserAwardRecord(<generated>)
	at com.origamii.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:56)
	at com.origamii.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:139)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1589)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at jdk.proxy2/jdk.proxy2.$Proxy183.update(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 73 common frames omitted
24-10-16.00:27:21.270 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:27:21.270 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:27:21.307 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:27:21.308 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:27:23.998 [main            ] INFO  Application            - Starting Application using Java 19.0.1 on Legion-R9000P with PID 22492 (E:\Code\Java\big-market\big-market-app\target\classes started by lenovo in E:\Code\Java\big-market)
24-10-16.00:27:23.998 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-10-16.00:27:24.851 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-10-16.00:27:24.853 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-10-16.00:27:24.892 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 0 Redis repository interfaces.
24-10-16.00:27:25.794 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-10-16.00:27:25.803 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-10-16.00:27:25.803 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-10-16.00:27:25.803 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-10-16.00:27:25.914 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-10-16.00:27:25.914 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1873 ms
24-10-16.00:27:26.292 [main            ] INFO  Version                - Redisson 3.23.4
24-10-16.00:27:26.735 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:27:26.749 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:27:28.307 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-10-16.00:27:28.398 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-10-16.00:27:28.412 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-10-16.00:27:28.414 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.236.132:5672]
24-10-16.00:27:28.460 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#5dc9d25a:0/SimpleConnection@5f69462f [delegate=amqp://origami@192.168.236.132:5672/, localPort= 14361]
24-10-16.00:27:28.544 [main            ] INFO  Application            - Started Application in 4.984 seconds (JVM running for 5.917)
24-10-16.00:27:29.017 [RMI TCP Connection(2)-192.168.236.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-10-16.00:27:29.017 [RMI TCP Connection(2)-192.168.236.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-10-16.00:27:29.020 [RMI TCP Connection(2)-192.168.236.1] INFO  DispatcherServlet      - Completed initialization in 3 ms
24-10-16.00:27:29.024 [RMI TCP Connection(3)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:27:29.256 [RMI TCP Connection(3)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:27:29.276 [RMI TCP Connection(3)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:27:29.293 [RMI TCP Connection(3)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:27:30.007 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:27:30.018 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:27:33.103 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动抽奖 user:origami activityId:100301
24-10-16.00:27:33.300 [http-nio-8091-exec-2] INFO  AbstractRaffleActivityPartake - 创建参与活动订单【已存在 未消费】 userId:origami, activityId:100301, userRaffleOrderEntity:{"activityId":100301,"activityName":"测试活动","orderId":"951635479379","orderState":"create","orderTime":1729007702000,"strategyId":100006,"userId":"origami"}
24-10-16.00:27:33.300 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动抽奖 创建订单 userId:origami activityId:100301 orderId:951635479379
24-10-16.00:27:36.071 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:27:36.079 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:27:41.582 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:27:42.888 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:27:42.929 [http-nio-8091-exec-2] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: origami strategyId: 100006 ruleModel: rule_default awardId: 103
24-10-16.00:27:51.033 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:27:51.037 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:27:51.036 [http-nio-8091-exec-2] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 origami 100006 103 rule_default
24-10-16.00:28:04.135 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:28:04.140 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:28:04.142 [http-nio-8091-exec-2] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:28:04.309 [http-nio-8091-exec-2] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:28:04.332 [http-nio-8091-exec-2] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:origami,strategyId:100006,awardId:103
24-10-16.00:28:04.337 [http-nio-8091-exec-2] INFO  RuleStockLogicTreeNode - 规则过滤-扣减库存-成功 userId:origami,strategyId:100006,awardId:103
24-10-16.00:28:04.435 [http-nio-8091-exec-2] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】，treeId：tree_luck_award，node：rule_stock，code：0001
24-10-16.00:28:08.710 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:28:08.715 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:28:08.715 [http-nio-8091-exec-2] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 origami 100006 103 
24-10-16.00:28:11.176 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】 strategyId:100006 awardId:103
24-10-16.00:28:21.872 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:28:57.360 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=53s225ms461µs400ns).
24-10-16.00:28:57.360 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=52s950ms134µs700ns).
24-10-16.00:28:57.359 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:28:57.359 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=53s225ms701µs900ns).
24-10-16.00:28:57.753 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:29:07.922 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:29:07.925 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:29:10.886 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:29:48.134 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=50s774ms352µs).
24-10-16.00:29:48.134 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=50s774ms196µs200ns).
24-10-16.00:29:48.134 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:29:48.137 [Retail_HikariCP housekeeper] WARN  HikariPool             - Retail_HikariCP - Thread starvation or clock leap detected (housekeeper delta=50s774ms313µs600ns).
24-10-16.00:29:48.148 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:29:52.363 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:29:57.121 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:30:00.322 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:30:05.301 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:30:05.305 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:30:19.665 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:30:20.430 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:30:28.423 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:30:28.426 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:30:31.523 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:30:31.525 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:30:35.315 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:30:35.318 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:30:35.441 [http-nio-8091-exec-2] INFO  EventPublisher         - 发送MQ消息 topic:send_award, message:{"data":{"awardId":103,"awardTitle":"6等奖","userId":"origami"},"id":"78800604498","timestamp":1729009833698}
24-10-16.00:30:35.465 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic:send_award message:{"data":{"awardId":103,"awardTitle":"6等奖","userId":"origami"},"id":"78800604498","timestamp":1729009833698}
24-10-16.00:30:40.010 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:30:40.012 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:30:42.865 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:30:42.865 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:30:43.395 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:30:43.524 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:30:43.564 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:30:43.564 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:30:52.564 [main            ] INFO  Application            - Starting Application using Java 19.0.1 on Legion-R9000P with PID 25788 (E:\Code\Java\big-market\big-market-app\target\classes started by lenovo in E:\Code\Java\big-market)
24-10-16.00:30:52.566 [main            ] INFO  Application            - The following 1 profile is active: "dev"
24-10-16.00:30:53.353 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-10-16.00:30:53.355 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-10-16.00:30:53.394 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 26 ms. Found 0 Redis repository interfaces.
24-10-16.00:30:54.204 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8091 (http)
24-10-16.00:30:54.212 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8091"]
24-10-16.00:30:54.213 [main            ] INFO  StandardService        - Starting service [Tomcat]
24-10-16.00:30:54.213 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
24-10-16.00:30:54.309 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
24-10-16.00:30:54.309 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1701 ms
24-10-16.00:30:54.621 [main            ] INFO  Version                - Redisson 3.23.4
24-10-16.00:30:55.032 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:30:55.045 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 192.168.236.132/192.168.236.132:16379
24-10-16.00:30:56.343 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-10-16.00:30:56.432 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8091"]
24-10-16.00:30:56.446 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8091 (http) with context path ''
24-10-16.00:30:56.448 [main            ] INFO  CachingConnectionFactory - Attempting to connect to: [192.168.236.132:5672]
24-10-16.00:30:56.489 [main            ] INFO  CachingConnectionFactory - Created new connection: rabbitConnectionFactory#49ea13b6:0/SimpleConnection@7dd847a2 [delegate=amqp://origami@192.168.236.132:5672/, localPort= 14463]
24-10-16.00:30:56.546 [main            ] INFO  Application            - Started Application in 4.397 seconds (JVM running for 5.055)
24-10-16.00:30:56.808 [RMI TCP Connection(2)-192.168.236.1] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
24-10-16.00:30:56.809 [RMI TCP Connection(2)-192.168.236.1] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
24-10-16.00:30:56.809 [RMI TCP Connection(2)-192.168.236.1] INFO  DispatcherServlet      - Completed initialization in 0 ms
24-10-16.00:30:56.810 [RMI TCP Connection(3)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:30:57.008 [RMI TCP Connection(3)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:30:57.024 [RMI TCP Connection(3)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:30:57.044 [RMI TCP Connection(3)-192.168.236.1] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:31:00.012 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:31:00.024 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:31:05.013 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:31:05.014 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:31:08.189 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动抽奖 user:origami activityId:100301
24-10-16.00:31:08.363 [http-nio-8091-exec-2] INFO  RaffleActivityController - 活动抽奖 创建订单 userId:origami activityId:100301 orderId:189933328155
24-10-16.00:31:08.382 [http-nio-8091-exec-2] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: origami strategyId: 100006 ruleModel: rule_default awardId: 105
24-10-16.00:31:08.383 [http-nio-8091-exec-2] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 origami 100006 105 rule_default
24-10-16.00:31:08.383 [http-nio-8091-exec-2] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-10-16.00:31:08.409 [http-nio-8091-exec-2] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-10-16.00:31:08.420 [http-nio-8091-exec-2] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:origami,strategyId:100006,awardId:105
24-10-16.00:31:08.424 [http-nio-8091-exec-2] INFO  RuleStockLogicTreeNode - 规则过滤-扣减库存-成功 userId:origami,strategyId:100006,awardId:105
24-10-16.00:31:08.448 [http-nio-8091-exec-2] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】，treeId：tree_luck_award，node：rule_stock，code：0001
24-10-16.00:31:08.449 [http-nio-8091-exec-2] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 origami 100006 105 
24-10-16.00:31:08.644 [http-nio-8091-exec-2] ERROR RaffleActivityController - 活动抽奖失败 userId:origami activityId:100301
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
### The error may exist in file [E:\Code\Java\big-market\big-market-app\target\classes\mybatis\mapper\user_award_record_mapper.xml]
### The error may involve com.origamii.infrastructure.persistent.dao.IUserAwardRecordDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_award_record_000(user_id, activity_id, strategy_id, order_id, award_id, award_title, award_time,                                       award_state, create_time, update_time)         values (?, ?, ?, ?, ?, ?, ?,                 ?, now(), now())
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
; Column 'award_title' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at jdk.proxy2/jdk.proxy2.$Proxy110.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at jdk.proxy2/jdk.proxy2.$Proxy136.insert(Unknown Source)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.lambda$saveUserAwardRecord$0(AwardRepository.java:88)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.saveUserAwardRecord(AwardRepository.java:85)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$FastClassBySpringCGLIB$$ef9e8803.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$EnhancerBySpringCGLIB$$4c1309e0.saveUserAwardRecord(<generated>)
	at com.origamii.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:56)
	at com.origamii.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:139)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1589)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at jdk.proxy2/jdk.proxy2.$Proxy183.update(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 73 common frames omitted
24-10-16.00:31:10.013 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:31:10.015 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:31:10.111 [http-nio-8091-exec-3] INFO  RaffleActivityController - 活动抽奖 user:origami activityId:100301
24-10-16.00:31:10.119 [http-nio-8091-exec-3] INFO  AbstractRaffleActivityPartake - 创建参与活动订单【已存在 未消费】 userId:origami, activityId:100301, userRaffleOrderEntity:{"activityId":100301,"activityName":"测试活动","orderId":"189933328155","orderState":"create","orderTime":1729009868000,"strategyId":100006,"userId":"origami"}
24-10-16.00:31:10.119 [http-nio-8091-exec-3] INFO  RaffleActivityController - 活动抽奖 创建订单 userId:origami activityId:100301 orderId:189933328155
24-10-16.00:31:10.125 [http-nio-8091-exec-3] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: origami strategyId: 100006 ruleModel: rule_default awardId: 106
24-10-16.00:31:10.126 [http-nio-8091-exec-3] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 origami 100006 106 rule_default
24-10-16.00:31:10.131 [http-nio-8091-exec-3] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:origami,strategyId:100006,awardId:106
24-10-16.00:31:10.137 [http-nio-8091-exec-3] INFO  RuleLockLogicTreeNode  - 用户抽奖次数大于规则限定值 允许抽奖 userId:origami,strategyId:100006,awardId:106,raffleCount:1,userRaffleCount:1
24-10-16.00:31:10.137 [http-nio-8091-exec-3] INFO  DecisionTreeEngine     - 决策树引擎【规则树】，treeId：tree_lock_1，node：rule_lock，code：0000
24-10-16.00:31:10.137 [http-nio-8091-exec-3] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:origami,strategyId:100006,awardId:106
24-10-16.00:31:10.142 [http-nio-8091-exec-3] INFO  RuleStockLogicTreeNode - 规则过滤-扣减库存-成功 userId:origami,strategyId:100006,awardId:106
24-10-16.00:31:10.143 [http-nio-8091-exec-3] INFO  DecisionTreeEngine     - 决策树引擎【规则树】，treeId：tree_lock_1，node：rule_stock，code：0001
24-10-16.00:31:10.143 [http-nio-8091-exec-3] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 origami 100006 106 
24-10-16.00:31:10.179 [http-nio-8091-exec-3] INFO  EventPublisher         - 发送MQ消息 topic:send_award, message:{"data":{"awardId":106,"awardTitle":"3等奖","userId":"origami"},"id":"24223314916","timestamp":1729009870156}
24-10-16.00:31:10.185 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic:send_award message:{"data":{"awardId":106,"awardTitle":"3等奖","userId":"origami"},"id":"24223314916","timestamp":1729009870156}
24-10-16.00:31:15.015 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:31:15.016 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】 strategyId:100006 awardId:105
24-10-16.00:31:15.026 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:31:20.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:31:20.004 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】 strategyId:100006 awardId:106
24-10-16.00:31:20.010 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:31:25.012 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:31:25.014 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:31:30.005 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:31:30.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:31:35.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:31:35.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:31:40.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:31:40.011 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:31:44.769 [http-nio-8091-exec-4] INFO  RaffleActivityController - 活动抽奖 user:origami activityId:100301
24-10-16.00:31:44.885 [http-nio-8091-exec-4] INFO  RaffleActivityController - 活动抽奖 创建订单 userId:origami activityId:100301 orderId:332601716821
24-10-16.00:31:44.896 [http-nio-8091-exec-4] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: origami strategyId: 100006 ruleModel: rule_default awardId: 102
24-10-16.00:31:44.896 [http-nio-8091-exec-4] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 origami 100006 102 rule_default
24-10-16.00:31:44.901 [http-nio-8091-exec-4] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:origami,strategyId:100006,awardId:102
24-10-16.00:31:44.904 [http-nio-8091-exec-4] INFO  RuleStockLogicTreeNode - 规则过滤-扣减库存-成功 userId:origami,strategyId:100006,awardId:102
24-10-16.00:31:44.906 [http-nio-8091-exec-4] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】，treeId：tree_luck_award，node：rule_stock，code：0001
24-10-16.00:31:44.906 [http-nio-8091-exec-4] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 origami 100006 102 
24-10-16.00:31:44.913 [http-nio-8091-exec-4] ERROR RaffleActivityController - 活动抽奖失败 userId:origami activityId:100301
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
### The error may exist in file [E:\Code\Java\big-market\big-market-app\target\classes\mybatis\mapper\user_award_record_mapper.xml]
### The error may involve com.origamii.infrastructure.persistent.dao.IUserAwardRecordDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_award_record_000(user_id, activity_id, strategy_id, order_id, award_id, award_title, award_time,                                       award_state, create_time, update_time)         values (?, ?, ?, ?, ?, ?, ?,                 ?, now(), now())
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
; Column 'award_title' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at jdk.proxy2/jdk.proxy2.$Proxy110.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at jdk.proxy2/jdk.proxy2.$Proxy136.insert(Unknown Source)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.lambda$saveUserAwardRecord$0(AwardRepository.java:88)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.saveUserAwardRecord(AwardRepository.java:85)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$FastClassBySpringCGLIB$$ef9e8803.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$EnhancerBySpringCGLIB$$4c1309e0.saveUserAwardRecord(<generated>)
	at com.origamii.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:56)
	at com.origamii.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:139)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1589)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at jdk.proxy2/jdk.proxy2.$Proxy183.update(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 73 common frames omitted
24-10-16.00:31:45.013 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:31:45.016 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:31:50.003 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:31:50.004 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】 strategyId:100006 awardId:102
24-10-16.00:31:50.017 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:31:55.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:31:55.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:32:00.008 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:32:00.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:32:05.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:32:05.010 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:32:10.008 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:32:10.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:32:15.006 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:32:15.007 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:32:20.013 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:32:20.015 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:32:25.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:32:25.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:32:30.015 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:32:30.016 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:32:35.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:32:35.008 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:32:40.010 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:32:40.010 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:32:45.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:32:45.011 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:32:50.006 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:32:50.008 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:32:55.010 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:32:55.012 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:33:00.006 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:33:00.008 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:33:05.013 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:33:05.014 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:33:10.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:33:10.002 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:33:15.007 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:33:15.009 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:33:20.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:33:20.010 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:33:25.009 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:33:25.010 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:33:30.014 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:33:30.016 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:33:35.003 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:33:35.005 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:33:40.009 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:33:40.011 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:33:45.013 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:33:45.014 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:33:50.015 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:33:50.016 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:33:55.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:33:55.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:34:00.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:34:00.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:34:05.003 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:34:05.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:34:10.006 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:34:10.007 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:34:15.001 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:34:15.003 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:34:20.004 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:34:20.005 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:34:25.013 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:34:25.015 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:34:30.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:34:30.007 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:34:35.004 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:34:35.005 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:34:40.014 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:34:40.014 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:34:45.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:34:45.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:34:50.007 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:34:50.008 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:34:55.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:34:55.004 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:35:00.003 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:35:00.004 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:35:05.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:35:05.004 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:35:10.003 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:35:10.004 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:35:10.608 [http-nio-8091-exec-7] INFO  RaffleActivityController - 活动抽奖 user:origami activityId:100301
24-10-16.00:35:10.649 [http-nio-8091-exec-7] INFO  AbstractRaffleActivityPartake - 创建参与活动订单【已存在 未消费】 userId:origami, activityId:100301, userRaffleOrderEntity:{"activityId":100301,"activityName":"测试活动","orderId":"332601716821","orderState":"create","orderTime":1729009905000,"strategyId":100006,"userId":"origami"}
24-10-16.00:35:10.649 [http-nio-8091-exec-7] INFO  RaffleActivityController - 活动抽奖 创建订单 userId:origami activityId:100301 orderId:332601716821
24-10-16.00:35:10.656 [http-nio-8091-exec-7] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: origami strategyId: 100006 ruleModel: rule_default awardId: 107
24-10-16.00:35:10.656 [http-nio-8091-exec-7] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 origami 100006 107 rule_default
24-10-16.00:35:10.665 [http-nio-8091-exec-7] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:origami,strategyId:100006,awardId:107
24-10-16.00:35:10.674 [http-nio-8091-exec-7] INFO  RuleLockLogicTreeNode  - 用户抽奖次数大于规则限定值 允许抽奖 userId:origami,strategyId:100006,awardId:107,raffleCount:1,userRaffleCount:2
24-10-16.00:35:10.674 [http-nio-8091-exec-7] INFO  DecisionTreeEngine     - 决策树引擎【规则树】，treeId：tree_lock_1，node：rule_lock，code：0000
24-10-16.00:35:10.674 [http-nio-8091-exec-7] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:origami,strategyId:100006,awardId:107
24-10-16.00:35:10.676 [http-nio-8091-exec-7] INFO  RuleStockLogicTreeNode - 规则过滤-扣减库存-成功 userId:origami,strategyId:100006,awardId:107
24-10-16.00:35:10.677 [http-nio-8091-exec-7] INFO  DecisionTreeEngine     - 决策树引擎【规则树】，treeId：tree_lock_1，node：rule_stock，code：0001
24-10-16.00:35:10.677 [http-nio-8091-exec-7] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 origami 100006 107 
24-10-16.00:35:10.728 [http-nio-8091-exec-7] INFO  EventPublisher         - 发送MQ消息 topic:send_award, message:{"data":{"awardId":107,"awardTitle":"2等奖","userId":"origami"},"id":"53843973998","timestamp":1729010110685}
24-10-16.00:35:10.734 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic:send_award message:{"data":{"awardId":107,"awardTitle":"2等奖","userId":"origami"},"id":"53843973998","timestamp":1729010110685}
24-10-16.00:35:12.863 [http-nio-8091-exec-8] INFO  RaffleActivityController - 活动抽奖 user:origami activityId:100301
24-10-16.00:35:12.891 [http-nio-8091-exec-8] INFO  RaffleActivityController - 活动抽奖 创建订单 userId:origami activityId:100301 orderId:406387363439
24-10-16.00:35:12.896 [http-nio-8091-exec-8] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: origami strategyId: 100006 ruleModel: rule_default awardId: 103
24-10-16.00:35:12.896 [http-nio-8091-exec-8] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 origami 100006 103 rule_default
24-10-16.00:35:12.900 [http-nio-8091-exec-8] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:origami,strategyId:100006,awardId:103
24-10-16.00:35:12.901 [http-nio-8091-exec-8] INFO  RuleStockLogicTreeNode - 规则过滤-扣减库存-成功 userId:origami,strategyId:100006,awardId:103
24-10-16.00:35:12.903 [http-nio-8091-exec-8] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】，treeId：tree_luck_award，node：rule_stock，code：0001
24-10-16.00:35:12.903 [http-nio-8091-exec-8] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 origami 100006 103 
24-10-16.00:35:12.918 [http-nio-8091-exec-8] INFO  EventPublisher         - 发送MQ消息 topic:send_award, message:{"data":{"awardId":103,"awardTitle":"6等奖","userId":"origami"},"id":"07846329945","timestamp":1729010112904}
24-10-16.00:35:12.919 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic:send_award message:{"data":{"awardId":103,"awardTitle":"6等奖","userId":"origami"},"id":"07846329945","timestamp":1729010112904}
24-10-16.00:35:13.936 [http-nio-8091-exec-12] INFO  RaffleActivityController - 活动抽奖 user:origami activityId:100301
24-10-16.00:35:13.965 [http-nio-8091-exec-12] INFO  RaffleActivityController - 活动抽奖 创建订单 userId:origami activityId:100301 orderId:338102395598
24-10-16.00:35:13.969 [http-nio-8091-exec-12] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: origami strategyId: 100006 ruleModel: rule_default awardId: 103
24-10-16.00:35:13.969 [http-nio-8091-exec-12] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 origami 100006 103 rule_default
24-10-16.00:35:13.974 [http-nio-8091-exec-12] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:origami,strategyId:100006,awardId:103
24-10-16.00:35:13.975 [http-nio-8091-exec-12] INFO  RuleStockLogicTreeNode - 规则过滤-扣减库存-成功 userId:origami,strategyId:100006,awardId:103
24-10-16.00:35:13.976 [http-nio-8091-exec-12] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】，treeId：tree_luck_award，node：rule_stock，code：0001
24-10-16.00:35:13.976 [http-nio-8091-exec-12] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 origami 100006 103 
24-10-16.00:35:13.993 [http-nio-8091-exec-12] INFO  EventPublisher         - 发送MQ消息 topic:send_award, message:{"data":{"awardId":103,"awardTitle":"6等奖","userId":"origami"},"id":"35023806067","timestamp":1729010113978}
24-10-16.00:35:13.995 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic:send_award message:{"data":{"awardId":103,"awardTitle":"6等奖","userId":"origami"},"id":"35023806067","timestamp":1729010113978}
24-10-16.00:35:14.748 [http-nio-8091-exec-10] INFO  RaffleActivityController - 活动抽奖 user:origami activityId:100301
24-10-16.00:35:14.772 [http-nio-8091-exec-10] INFO  RaffleActivityController - 活动抽奖 创建订单 userId:origami activityId:100301 orderId:011375676144
24-10-16.00:35:14.777 [http-nio-8091-exec-10] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: origami strategyId: 100006 ruleModel: rule_default awardId: 101
24-10-16.00:35:14.777 [http-nio-8091-exec-10] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 origami 100006 101 rule_default
24-10-16.00:35:14.781 [http-nio-8091-exec-10] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:origami,strategyId:100006,awardId:101
24-10-16.00:35:14.783 [http-nio-8091-exec-10] INFO  RuleStockLogicTreeNode - 规则过滤-扣减库存-成功 userId:origami,strategyId:100006,awardId:101
24-10-16.00:35:14.784 [http-nio-8091-exec-10] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】，treeId：tree_luck_award，node：rule_stock，code：0001
24-10-16.00:35:14.784 [http-nio-8091-exec-10] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 origami 100006 101 
24-10-16.00:35:14.804 [http-nio-8091-exec-10] ERROR RaffleActivityController - 活动抽奖失败 userId:origami activityId:100301
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
### The error may exist in file [E:\Code\Java\big-market\big-market-app\target\classes\mybatis\mapper\user_award_record_mapper.xml]
### The error may involve com.origamii.infrastructure.persistent.dao.IUserAwardRecordDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_award_record_000(user_id, activity_id, strategy_id, order_id, award_id, award_title, award_time,                                       award_state, create_time, update_time)         values (?, ?, ?, ?, ?, ?, ?,                 ?, now(), now())
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
; Column 'award_title' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at jdk.proxy2/jdk.proxy2.$Proxy110.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at jdk.proxy2/jdk.proxy2.$Proxy136.insert(Unknown Source)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.lambda$saveUserAwardRecord$0(AwardRepository.java:88)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.saveUserAwardRecord(AwardRepository.java:85)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$FastClassBySpringCGLIB$$ef9e8803.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$EnhancerBySpringCGLIB$$4c1309e0.saveUserAwardRecord(<generated>)
	at com.origamii.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:56)
	at com.origamii.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:139)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1589)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at jdk.proxy2/jdk.proxy2.$Proxy183.update(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 73 common frames omitted
24-10-16.00:35:15.010 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:35:15.011 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:35:15.012 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】 strategyId:100006 awardId:107
24-10-16.00:35:19.164 [http-nio-8091-exec-11] INFO  RaffleActivityController - 活动抽奖 user:origami activityId:100301
24-10-16.00:35:19.169 [http-nio-8091-exec-11] INFO  AbstractRaffleActivityPartake - 创建参与活动订单【已存在 未消费】 userId:origami, activityId:100301, userRaffleOrderEntity:{"activityId":100301,"activityName":"测试活动","orderId":"011375676144","orderState":"create","orderTime":1729010115000,"strategyId":100006,"userId":"origami"}
24-10-16.00:35:19.169 [http-nio-8091-exec-11] INFO  RaffleActivityController - 活动抽奖 创建订单 userId:origami activityId:100301 orderId:011375676144
24-10-16.00:35:19.173 [http-nio-8091-exec-11] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: origami strategyId: 100006 ruleModel: rule_default awardId: 108
24-10-16.00:35:19.174 [http-nio-8091-exec-11] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 origami 100006 108 rule_default
24-10-16.00:35:19.178 [http-nio-8091-exec-11] INFO  RuleLockLogicTreeNode  - 规则过滤-次数锁 userId:origami,strategyId:100006,awardId:108
24-10-16.00:35:19.182 [http-nio-8091-exec-11] INFO  RuleLockLogicTreeNode  - 用户抽奖次数大于规则限定值 允许抽奖 userId:origami,strategyId:100006,awardId:108,raffleCount:2,userRaffleCount:5
24-10-16.00:35:19.182 [http-nio-8091-exec-11] INFO  DecisionTreeEngine     - 决策树引擎【规则树】，treeId：tree_lock_2，node：rule_lock，code：0000
24-10-16.00:35:19.182 [http-nio-8091-exec-11] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:origami,strategyId:100006,awardId:108
24-10-16.00:35:19.185 [http-nio-8091-exec-11] INFO  RuleStockLogicTreeNode - 规则过滤-扣减库存-成功 userId:origami,strategyId:100006,awardId:108
24-10-16.00:35:19.186 [http-nio-8091-exec-11] INFO  DecisionTreeEngine     - 决策树引擎【规则树】，treeId：tree_lock_2，node：rule_stock，code：0001
24-10-16.00:35:19.186 [http-nio-8091-exec-11] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 origami 100006 108 
24-10-16.00:35:19.205 [http-nio-8091-exec-11] INFO  EventPublisher         - 发送MQ消息 topic:send_award, message:{"data":{"awardId":108,"awardTitle":"1等奖","userId":"origami"},"id":"83241964339","timestamp":1729010119190}
24-10-16.00:35:19.208 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic:send_award message:{"data":{"awardId":108,"awardTitle":"1等奖","userId":"origami"},"id":"83241964339","timestamp":1729010119190}
24-10-16.00:35:20.015 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:35:20.016 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:35:20.018 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】 strategyId:100006 awardId:103
24-10-16.00:35:20.287 [http-nio-8091-exec-9] INFO  RaffleActivityController - 活动抽奖 user:origami activityId:100301
24-10-16.00:35:20.318 [http-nio-8091-exec-9] INFO  RaffleActivityController - 活动抽奖 创建订单 userId:origami activityId:100301 orderId:413075112009
24-10-16.00:35:20.323 [http-nio-8091-exec-9] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: origami strategyId: 100006 ruleModel: rule_default awardId: 104
24-10-16.00:35:20.323 [http-nio-8091-exec-9] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 origami 100006 104 rule_default
24-10-16.00:35:20.327 [http-nio-8091-exec-9] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:origami,strategyId:100006,awardId:104
24-10-16.00:35:20.329 [http-nio-8091-exec-9] INFO  RuleStockLogicTreeNode - 规则过滤-扣减库存-成功 userId:origami,strategyId:100006,awardId:104
24-10-16.00:35:20.331 [http-nio-8091-exec-9] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】，treeId：tree_luck_award，node：rule_stock，code：0001
24-10-16.00:35:20.331 [http-nio-8091-exec-9] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 origami 100006 104 
24-10-16.00:35:20.338 [http-nio-8091-exec-9] ERROR RaffleActivityController - 活动抽奖失败 userId:origami activityId:100301
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
### The error may exist in file [E:\Code\Java\big-market\big-market-app\target\classes\mybatis\mapper\user_award_record_mapper.xml]
### The error may involve com.origamii.infrastructure.persistent.dao.IUserAwardRecordDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into user_award_record_000(user_id, activity_id, strategy_id, order_id, award_id, award_title, award_time,                                       award_state, create_time, update_time)         values (?, ?, ?, ?, ?, ?, ?,                 ?, now(), now())
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
; Column 'award_title' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at jdk.proxy2/jdk.proxy2.$Proxy110.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at jdk.proxy2/jdk.proxy2.$Proxy136.insert(Unknown Source)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.lambda$saveUserAwardRecord$0(AwardRepository.java:88)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at com.origamii.infrastructure.persistent.repository.AwardRepository.saveUserAwardRecord(AwardRepository.java:85)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$FastClassBySpringCGLIB$$ef9e8803.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at com.origamii.infrastructure.persistent.repository.AwardRepository$$EnhancerBySpringCGLIB$$4c1309e0.saveUserAwardRecord(<generated>)
	at com.origamii.domain.award.service.AwardService.saveUserAwardRecord(AwardService.java:56)
	at com.origamii.trigger.http.RaffleActivityController.draw(RaffleActivityController.java:139)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:1589)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'award_title' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at jdk.proxy2/jdk.proxy2.$Proxy183.update(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)
	at java.base/java.lang.reflect.Method.invoke(Method.java:578)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 73 common frames omitted
24-10-16.00:35:21.266 [http-nio-8091-exec-13] INFO  RaffleActivityController - 活动抽奖 user:origami activityId:100301
24-10-16.00:35:21.271 [http-nio-8091-exec-13] INFO  AbstractRaffleActivityPartake - 创建参与活动订单【已存在 未消费】 userId:origami, activityId:100301, userRaffleOrderEntity:{"activityId":100301,"activityName":"测试活动","orderId":"413075112009","orderState":"create","orderTime":1729010120000,"strategyId":100006,"userId":"origami"}
24-10-16.00:35:21.271 [http-nio-8091-exec-13] INFO  RaffleActivityController - 活动抽奖 创建订单 userId:origami activityId:100301 orderId:413075112009
24-10-16.00:35:21.277 [http-nio-8091-exec-13] INFO  DefaultLogicChain      - 抽奖责任链-默认处理 userId: origami strategyId: 100006 ruleModel: rule_default awardId: 103
24-10-16.00:35:21.277 [http-nio-8091-exec-13] INFO  AbstractRaffleStrategy - 抽奖策略计算-责任链 origami 100006 103 rule_default
24-10-16.00:35:21.281 [http-nio-8091-exec-13] INFO  RuleStockLogicTreeNode - 规则过滤-库存扣减 userId:origami,strategyId:100006,awardId:103
24-10-16.00:35:21.283 [http-nio-8091-exec-13] INFO  RuleStockLogicTreeNode - 规则过滤-扣减库存-成功 userId:origami,strategyId:100006,awardId:103
24-10-16.00:35:21.284 [http-nio-8091-exec-13] INFO  DecisionTreeEngine     - 决策树引擎【规则树-兜底奖励】，treeId：tree_luck_award，node：rule_stock，code：0001
24-10-16.00:35:21.284 [http-nio-8091-exec-13] INFO  AbstractRaffleStrategy - 抽奖策略计算-规则树 origami 100006 103 
24-10-16.00:35:21.298 [http-nio-8091-exec-13] INFO  EventPublisher         - 发送MQ消息 topic:send_award, message:{"data":{"awardId":103,"awardTitle":"6等奖","userId":"origami"},"id":"92894158804","timestamp":1729010121285}
24-10-16.00:35:21.300 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-1] INFO  SendAwardCustomer      - 监听用户奖品发送消息 topic:send_award message:{"data":{"awardId":103,"awardTitle":"6等奖","userId":"origami"},"id":"92894158804","timestamp":1729010121285}
24-10-16.00:35:25.002 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:35:25.003 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】 strategyId:100006 awardId:103
24-10-16.00:35:25.011 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:35:30.011 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:35:30.012 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】 strategyId:100006 awardId:101
24-10-16.00:35:30.018 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:35:35.010 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:35:35.011 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】 strategyId:100006 awardId:108
24-10-16.00:35:35.018 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:35:40.005 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:35:40.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:35:40.006 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】 strategyId:100006 awardId:104
24-10-16.00:35:45.011 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:35:45.012 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】 strategyId:100006 awardId:103
24-10-16.00:35:45.019 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:35:50.015 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:35:50.017 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:35:55.012 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:35:55.013 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:36:00.013 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:36:00.013 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:36:05.016 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:36:05.016 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:36:10.005 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:36:10.007 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:36:15.008 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:36:15.009 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:36:20.004 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:36:20.010 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:36:25.015 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:36:25.016 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:36:30.007 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:36:30.008 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:36:35.001 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:36:35.002 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:36:40.002 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:36:40.004 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:36:44.625 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:36:44.626 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Waiting for workers to finish.
24-10-16.00:36:45.015 [scheduling-1    ] INFO  UpdateActivitySkuStockJob - 定时任务 - 更新活动sku库存【延迟队列获取】
24-10-16.00:36:45.017 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务 - 更新奖品消耗库存【延迟队列获取】
24-10-16.00:36:45.078 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#1-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:36:45.406 [org.springframework.amqp.rabbit.RabbitListenerEndpointContainer#0-2] INFO  SimpleMessageListenerContainer - Successfully waited for workers to finish.
24-10-16.00:36:45.449 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
24-10-16.00:36:45.449 [SpringApplicationShutdownHook] INFO  SimpleMessageListenerContainer - Shutdown ignored - container is already stopped
